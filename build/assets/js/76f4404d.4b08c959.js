"use strict";(self.webpackChunkddii=self.webpackChunkddii||[]).push([[9379],{3905:function(e,n,t){t.d(n,{Zo:function(){return c},kt:function(){return k}});var a=t(67294);function r(e,n,t){return n in e?Object.defineProperty(e,n,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[n]=t,e}function l(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);n&&(a=a.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,a)}return t}function s(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?l(Object(t),!0).forEach((function(n){r(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):l(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}function o(e,n){if(null==e)return{};var t,a,r=function(e,n){if(null==e)return{};var t,a,r={},l=Object.keys(e);for(a=0;a<l.length;a++)t=l[a],n.indexOf(t)>=0||(r[t]=e[t]);return r}(e,n);if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(e);for(a=0;a<l.length;a++)t=l[a],n.indexOf(t)>=0||Object.prototype.propertyIsEnumerable.call(e,t)&&(r[t]=e[t])}return r}var i=a.createContext({}),p=function(e){var n=a.useContext(i),t=n;return e&&(t="function"==typeof e?e(n):s(s({},n),e)),t},c=function(e){var n=p(e.components);return a.createElement(i.Provider,{value:n},e.children)},m={inlineCode:"code",wrapper:function(e){var n=e.children;return a.createElement(a.Fragment,{},n)}},u=a.forwardRef((function(e,n){var t=e.components,r=e.mdxType,l=e.originalType,i=e.parentName,c=o(e,["components","mdxType","originalType","parentName"]),u=p(t),k=r,d=u["".concat(i,".").concat(k)]||u[k]||m[k]||l;return t?a.createElement(d,s(s({ref:n},c),{},{components:t})):a.createElement(d,s({ref:n},c))}));function k(e,n){var t=arguments,r=n&&n.mdxType;if("string"==typeof e||r){var l=t.length,s=new Array(l);s[0]=u;var o={};for(var i in n)hasOwnProperty.call(n,i)&&(o[i]=n[i]);o.originalType=e,o.mdxType="string"==typeof e?e:r,s[1]=o;for(var p=2;p<l;p++)s[p]=t[p];return a.createElement.apply(null,s)}return a.createElement.apply(null,t)}u.displayName="MDXCreateElement"},51819:function(e,n,t){t.r(n),t.d(n,{assets:function(){return c},contentTitle:function(){return i},default:function(){return k},frontMatter:function(){return o},metadata:function(){return p},toc:function(){return m}});var a=t(87462),r=t(63366),l=(t(67294),t(3905)),s=["components"],o={layout:"single",title:"EKS Anywhere on vSphere Homelab",comments:!0,classes:"wide",description:"vSphere homelab \ud658\uacbd\uc5d0\uc11c EKS Anywhere \uad6c\uc131\ud558\uae30",toc:!0,toc_label:"Table of Contents",slug:"kubernetes/eks-anywhere/",date:new Date("2022-03-06T00:00:00.000Z"),categories:["Kubernetes"],tags:["Kubernetes","vsphere","eks anywhere","eks","flux","gitops","eks-anywhere"]},i=void 0,p={permalink:"/kubernetes/eks-anywhere/",editUrl:"https://github.com/ddiiwoong/newblog/tree/main/blog/2022-03-06-eks-anywhere.md",source:"@site/blog/2022-03-06-eks-anywhere.md",title:"EKS Anywhere on vSphere Homelab",description:"vSphere homelab \ud658\uacbd\uc5d0\uc11c EKS Anywhere \uad6c\uc131\ud558\uae30",date:"2022-03-06T00:00:00.000Z",formattedDate:"March 6, 2022",tags:[{label:"Kubernetes",permalink:"/tags/kubernetes"},{label:"vsphere",permalink:"/tags/vsphere"},{label:"eks anywhere",permalink:"/tags/eks-anywhere"},{label:"eks",permalink:"/tags/eks"},{label:"flux",permalink:"/tags/flux"},{label:"gitops",permalink:"/tags/gitops"}],readingTime:30.095,truncated:!0,authors:[],frontMatter:{layout:"single",title:"EKS Anywhere on vSphere Homelab",comments:!0,classes:"wide",description:"vSphere homelab \ud658\uacbd\uc5d0\uc11c EKS Anywhere \uad6c\uc131\ud558\uae30",toc:!0,toc_label:"Table of Contents",slug:"kubernetes/eks-anywhere/",date:"2022-03-06T00:00:00.000Z",categories:["Kubernetes"],tags:["Kubernetes","vsphere","eks anywhere","eks","flux","gitops","eks-anywhere"]},prevItem:{title:"EKS Anywhere Advanced Usages",permalink:"/kubernetes/eks-anywhere-adv/"},nextItem:{title:"What is Tailscale?",permalink:"/kubernetes/what-is-tailscale/"}},c={authorsImageUrls:[]},m=[{value:"EKS Anywhere",id:"eks-anywhere",level:2},{value:"\uc0ac\uc804 \uc900\ube44\uc0ac\ud56d",id:"\uc0ac\uc804-\uc900\ube44\uc0ac\ud56d",level:2},{value:"\ub85c\uceec \uad00\ub9ac \ud658\uacbd",id:"\ub85c\uceec-\uad00\ub9ac-\ud658\uacbd",level:3},{value:"vSphere",id:"vsphere",level:3},{value:"Homelab \uad6c\uc131\ud658\uacbd",id:"homelab-\uad6c\uc131\ud658\uacbd",level:2},{value:"Hardware",id:"hardware",level:3},{value:"Software",id:"software",level:3},{value:"\ud074\ub7ec\uc2a4\ud130 \ud658\uacbd\uad6c\uc131",id:"\ud074\ub7ec\uc2a4\ud130-\ud658\uacbd\uad6c\uc131",level:2},{value:"\ud074\ub7ec\uc2a4\ud130 \uc0dd\uc131",id:"\ud074\ub7ec\uc2a4\ud130-\uc0dd\uc131",level:2},{value:"\ub85c\ub4dc\ubc38\ub7f0\uc11c \uad6c\uc131",id:"\ub85c\ub4dc\ubc38\ub7f0\uc11c-\uad6c\uc131",level:2},{value:"\uc778\uadf8\ub808\uc2a4 \ucee8\ud2b8\ub864\ub7ec \uc124\uce58",id:"\uc778\uadf8\ub808\uc2a4-\ucee8\ud2b8\ub864\ub7ec-\uc124\uce58",level:2},{value:"GitOps \ucee8\ud2b8\ub864\ub7ec\ub85c \ud074\ub7ec\uc2a4\ud130 \uad00\ub9ac",id:"gitops-\ucee8\ud2b8\ub864\ub7ec\ub85c-\ud074\ub7ec\uc2a4\ud130-\uad00\ub9ac",level:2},{value:"\uc815\ub9ac",id:"\uc815\ub9ac",level:2}],u={toc:m};function k(e){var n=e.components,o=(0,r.Z)(e,s);return(0,l.kt)("wrapper",(0,a.Z)({},u,o,{components:n,mdxType:"MDXLayout"}),(0,l.kt)("h2",{id:"eks-anywhere"},"EKS Anywhere"),(0,l.kt)("p",null,(0,l.kt)("inlineCode",{parentName:"p"},"EKS Anywhere"),"\ub294 eksctl\ub97c \uc0ac\uc6a9\ud558\ub294 \ud658\uacbd\uc5d0\uc11c ",(0,l.kt)("a",{parentName:"p",href:"https://github.com/kubernetes-sigs/cluster-api-provider-vsphere"},"Kubernetes Cluster API Provider vSphere")," \uc778 CAPV\ub97c \ud1b5\ud574 vSphere \uae30\ubc18\uc73c\ub85c \ucfe0\ubc84\ub124\ud2f0\uc2a4 \ud074\ub7ec\uc2a4\ud130\ub97c \uad6c\uc131\ud574\uc8fc\ub294 \uc624\ud508\uc18c\uc2a4\uc774\ub2e4. CAPV Spec\uc740 ",(0,l.kt)("a",{parentName:"p",href:"https://cluster-api.sigs.k8s.io/"},"Kubernetes Cluster API")," \uae30\ubc18\uc73c\ub85c \ucfe0\ubc84\ub124\ud2f0\uc2a4 \uc2a4\ud0c0\uc77c API\ud615\ud0dc\uc758 \uc120\uc5b8\uc801(Declarative) \ubc29\uc2dd\uc73c\ub85c \ucfe0\ubc84\ub124\ud2f0\uc2a4 \ud074\ub7ec\uc2a4\ud130\uc758 Lifecycle\uc744 \uad00\ub9ac\ud558\ub294 \ud504\ub85c\uc81d\ud2b8\uc774\ub2e4. "),(0,l.kt)("p",null,"Ubuntu \ub610\ub294 Mac admin \ud658\uacbd\uc5d0\uc11c eksctl \uba85\ub839\uc5b4\ub85c \ub85c\uceec \ud074\ub7ec\uc2a4\ud130\ub4e4\uc744 \uad00\ub9ac\ud558\uace0 \ud074\ub7ec\uc2a4\ud130\ub97c \uc0dd\uc131, \uc0ad\uc81c\ud560 \uc218 \uc788\ub2e4. \uc77c\ub2e8 \uae30\ubcf8\uc801\uc73c\ub85c \ud074\ub7ec\uc2a4\ud130\ub97c \uc0dd\uc131\ud558\uace0 \uad00\ub9ac\ud558\ub294 \ubc29\uc2dd\uc774 eksctl\uacfc \uac70\uc758 \uc720\uc0ac\ud558\ub2e4. \ub610\ud55c EKS \uc11c\ube44\uc2a4\uc758 \ubc30\ud3ec \ubc84\uc804\uacfc \ub3d9\uc77c\ud55c \ubc84\uc804\uc744 \uc0ac\uc6a9\ud568\uc73c\ub85c\uc368 (\ud3ec\uc2a4\ud305 \ub2f9\uc2dc \ubc84\uc804 1.21) vSphere \uae30\ubc18 \ud558\uc774\ube0c\ub9ac\ub4dc \ud658\uacbd\uc5d0\uc11c\uc758 \ucfe0\ubc84\ub124\ud2f0\uc2a4 \ud074\ub7ec\uc2a4\ud130 \ubc0f \uc6cc\ud06c\ub85c\ub4dc \uad00\ub9ac\ub97c \ud3b8\ud558\uac8c \ud560 \uc218 \uc788\ub2e4."),(0,l.kt)("p",null,"\ud06c\uac8c EKS native \uc11c\ube44\uc2a4\uc640 \ud06c\uac8c \ub2e4\ub978\uc810 \uba87\uac00\uc9c0\ub294 \ub2e4\uc74c\uacfc \uac19\ub2e4. "),(0,l.kt)("ul",null,(0,l.kt)("li",{parentName:"ul"},"\ucef4\ud4e8\ud305 \ud658\uacbd : vSphere, Docker(\uac1c\ubc1c\ud658\uacbd \uad6c\uc131\uc2dc)"),(0,l.kt)("li",{parentName:"ul"},"\ub178\ub4dc \uc9c0\uc6d0 OS :  BottleRocket, Ubuntu"),(0,l.kt)("li",{parentName:"ul"},"CNI : Cilium")),(0,l.kt)("p",null,"\uc790\uc138\ud55c \ub0b4\uc6a9\uc740 ",(0,l.kt)("a",{parentName:"p",href:"https://anywhere.eks.amazonaws.com/docs/concepts/eksafeatures/"},"\ube44\uad50\ud45c"),"\ub97c \ucc38\uace0\ud558\uc790."),(0,l.kt)("h2",{id:"\uc0ac\uc804-\uc900\ube44\uc0ac\ud56d"},"\uc0ac\uc804 \uc900\ube44\uc0ac\ud56d"),(0,l.kt)("h3",{id:"\ub85c\uceec-\uad00\ub9ac-\ud658\uacbd"},"\ub85c\uceec \uad00\ub9ac \ud658\uacbd"),(0,l.kt)("ul",null,(0,l.kt)("li",{parentName:"ul"},"Docker 20.x \uc774\uc0c1 \ubc84\uc804  "),(0,l.kt)("li",{parentName:"ul"},"Mac OS(10.15) / Ubuntu(20.04.2 LTS)"),(0,l.kt)("li",{parentName:"ul"},"CPU 4\ucf54\uc5b4"),(0,l.kt)("li",{parentName:"ul"},"\uba54\ubaa8\ub9ac 16GB"),(0,l.kt)("li",{parentName:"ul"},"\ub514\uc2a4\ud06c 30GB")),(0,l.kt)("h3",{id:"vsphere"},"vSphere"),(0,l.kt)("p",null,(0,l.kt)("a",{parentName:"p",href:"https://anywhere.eks.amazonaws.com/docs/reference/vsphere/vsphere-prereq/"},"https://anywhere.eks.amazonaws.com/docs/reference/vsphere/vsphere-prereq/")),(0,l.kt)("ul",null,(0,l.kt)("li",{parentName:"ul"},"vCenter \ud658\uacbd\uc758 vSphere 7.0 \uc774\uc0c1"),(0,l.kt)("li",{parentName:"ul"},"\ucd5c\uc18c VM 4\ub300 (\uac01 2 vCPU, 8GB \uba54\ubaa8\ub9ac, 25GB \ub514\uc2a4\ud06c \uc774\uc0c1 \uad8c\uc7a5)",(0,l.kt)("ul",{parentName:"li"},(0,l.kt)("li",{parentName:"ul"},"Control Plane 1\ub300"),(0,l.kt)("li",{parentName:"ul"},"etcd \ub178\ub4dc 1\ub300"),(0,l.kt)("li",{parentName:"ul"},"worker \ub178\ub4dc 2\ub300"))),(0,l.kt)("li",{parentName:"ul"},"DHCP \ud658\uacbd"),(0,l.kt)("li",{parentName:"ul"},"API \uc11c\ubc84 \uc6a9 Static IP 1\uac1c"),(0,l.kt)("li",{parentName:"ul"},"\uc678\ubd80 \ubc14\uc774\ub108\ub9ac, \uc774\ubbf8\uc9c0 \ub2e4\uc6b4\ub85c\ub4dc\ub97c \uc704\ud55c \ub124\ud2b8\uc6cc\ud06c \ud658\uacbd",(0,l.kt)("ul",{parentName:"li"},(0,l.kt)("li",{parentName:"ul"},"\ud074\ub7ec\uc2a4\ud130 \uc790\uccb4\uc5d0\uc11c \ubc29\ud654\ubcbd \ub4f1\uc73c\ub85c \uc778\ud55c \uc778\ud130\ub137\uc774 \uc548\ub418\ub294 \uacbd\uc6b0 ",(0,l.kt)("a",{parentName:"li",href:"https://anywhere.eks.amazonaws.com/docs/reference/clusterspec/proxy/"},"\ud504\ub85d\uc2dc \uad6c\uc131"),"\uc744 \ud1b5\ud574 \uac00\ub2a5\ud568")))),(0,l.kt)("h2",{id:"homelab-\uad6c\uc131\ud658\uacbd"},"Homelab \uad6c\uc131\ud658\uacbd"),(0,l.kt)("p",null,"\uae30\uc874\uc5d0 \uc6b4\uc601\ud558\ub358 ESXi \ud658\uacbd\uc744 \uadf8\ub300\ub85c \ud65c\uc6a9\ud558\ub3c4\ub85d \ud588\ub2e4. \ucd94\uac00\uc801\uc73c\ub85c \ud558\ub4dc\uc6e8\uc5b4\ub97c \uad6c\ube44\ud558\uae30 \uc704\ud574 \ube44\uc6a9\uc774 \ubc1c\uc0dd\ud55c\ubd80\ubd84\uc740 \uc5c6\ub2e4.   "),(0,l.kt)("h3",{id:"hardware"},"Hardware"),(0,l.kt)("ul",null,(0,l.kt)("li",{parentName:"ul"},"Dell Precision Tower 3620",(0,l.kt)("ul",{parentName:"li"},(0,l.kt)("li",{parentName:"ul"},"Intel(R) Xeon(R) CPU E3-1240L v5"),(0,l.kt)("li",{parentName:"ul"},"TeamGroup DDR4-2666 16GB * 4ea"),(0,l.kt)("li",{parentName:"ul"},"(VM \uc6a9) SAMSUNG NVMe SSD PM981 - 1TB"),(0,l.kt)("li",{parentName:"ul"},"(ESXi \uc6a9) Sandisk SSD Z410- 240GB")))),(0,l.kt)("h3",{id:"software"},"Software"),(0,l.kt)("ul",null,(0,l.kt)("li",{parentName:"ul"},"vSphere 7.0 Update 3"),(0,l.kt)("li",{parentName:"ul"},"vCenter 7.0.3 (VSCA)"),(0,l.kt)("li",{parentName:"ul"},"Docker Desktop ",(0,l.kt)("a",{parentName:"li",href:"https://docs.docker.com/desktop/mac/release-notes/#docker-desktop-420"},"4.2.0"),"\ubc84\uc804\uc744 \uc0ac\uc6a9 ",(0,l.kt)("ul",{parentName:"li"},(0,l.kt)("li",{parentName:"ul"},"4.3.0 \ubc84\uc804 \ud558\uc704 \ud638\ud658 \ubb38\uc81c\uac00\uc788\uc5b4 \uae08\ubc88 \ud14c\uc2a4\ud2b8 \ud658\uacbd\uc5d0\uc11c\ub294 4.2.0 \uc0ac\uc6a9"),(0,l.kt)("li",{parentName:"ul"},"\ub3c4\ucee4 \ub9ac\uc18c\uc2a4\ub97c \ucd5c\uc18c ",(0,l.kt)("inlineCode",{parentName:"li"},"8vCPU"),", ",(0,l.kt)("inlineCode",{parentName:"li"},"16GB"),"\ub85c \uc124\uc815"))),(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("a",{parentName:"li",href:"https://kubernetes.io/ko/docs/tasks/tools/"},"kubectl")," v1.23.4"),(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("a",{parentName:"li",href:"https://eksctl.io/introduction/#installation"},"eksctl")," v0.85.0"),(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("a",{parentName:"li",href:"https://anywhere.eks.amazonaws.com/docs/getting-started/install/"},"eksctl-anywhere")," v0.7.0"),(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("a",{parentName:"li",href:"https://docs.aws.amazon.com/ko_kr/eks/latest/userguide/install-aws-iam-authenticator.html"},"aws-iam-authenticator")," v0.5.5"),(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("a",{parentName:"li",href:"https://anywhere.eks.amazonaws.com/docs/reference/artifacts/"},"bottlerocket OVA")," v1.21 (\uc790\ub3d9 \uc0dd\uc131\ub418\ub294 OVA\ub85c \ubcc4\ub3c4 \uad6c\uc131\uc774 \ud544\uc694\uc5c6\ub2e4)  ")),(0,l.kt)("h2",{id:"\ud074\ub7ec\uc2a4\ud130-\ud658\uacbd\uad6c\uc131"},"\ud074\ub7ec\uc2a4\ud130 \ud658\uacbd\uad6c\uc131"),(0,l.kt)("p",null,(0,l.kt)("a",{parentName:"p",href:"https://anywhere.eks.amazonaws.com/docs/concepts/clusterworkflow/"},"\uacf5\uc2dd \ud648\ud398\uc774\uc9c0\uc758 \ud074\ub7ec\uc2a4\ud130 \uc0dd\uc131, \uc0ad\uc81c \uc6cc\ud06c\ud50c\ub85c\uc6b0"),"\ub97c \ucc38\uace0\ud558\uc5ec \uc0ac\uc804 \uad6c\uc131\ub41c Homelab\uc5d0 \uc801\uc6a9\ud55c\ub2e4. "),(0,l.kt)("p",null,(0,l.kt)("img",{parentName:"p",src:"https://anywhere.eks.amazonaws.com/images/eks-a_create_cluster.png",alt:"workflow"})),(0,l.kt)("p",null,"\ucc98\uc74c\uc5d0\ub294 eksctl \uba85\ub839\uc73c\ub85c \ud074\ub7ec\uc2a4\ud130\ub97c \uc0dd\uc131\ud558\ub294 \uacfc\uc815\uc73c\ub85c \uc0ac\uc804\uc5d0 \uc0dd\uc131\ud55c cluster config yaml\uc744 \ud1b5\ud574 \ub85c\uceec \ub3c4\ucee4 \uc5d4\uc9c4\uc5d0 bootstrap\uc744 \ud558\ub294 \uba85\ub839\uc744 \ub0b4\ub9b0\ub2e4. \uc774\ub54c \ub85c\uceec \ub3c4\ucee4 \uc5d4\uc9c4\uc5d0\uc11c\ub294 Docker in Docker \uc5d4\uc9c4\uc778 ",(0,l.kt)("a",{parentName:"p",href:"https://kind.sigs.k8s.io/"},"kind"),"\ub97c \ud1b5\ud574 \ud074\ub7ec\uc2a4\ud130 \ubc88\ub4e4 \ucee8\ud53c\uadf8\ub97c \uc0dd\uc131\ud55c\ub2e4. "),(0,l.kt)("p",null,(0,l.kt)("a",{parentName:"p",href:"https://github.com/kubernetes-sigs/cluster-api/tree/main/cmd/clusterctl"},"clusterctl"),"\ub97c \ud1b5\ud574 ",(0,l.kt)("a",{parentName:"p",href:"https://github.com/kubernetes-sigs/cluster-api/tree/main/test/infrastructure/docker"},"Cluster API Provider Docker"),"\ud615\ud0dc\ub85c \ubd80\ubaa8(bootstrap) \ud074\ub7ec\uc2a4\ud130\ub97c \ub9cc\ub4dc\ub294 \uacfc\uc815\uc774 ",(0,l.kt)("inlineCode",{parentName:"p"},"eksctl anywhere")," \uba85\ub839\uc73c\ub85c \ucd94\uc0c1\ud654 \ub418\ub294\uac83\uc774\ub77c \ubcfc \uc218 \uc788\ub2e4. "),(0,l.kt)("p",null,"\ud574\ub2f9 \ub2e8\uacc4\uc5d0\uc11c \uba3c\uc800 Bastion Host\ub098 \uad00\ub9ac \uba38\uc2e0\uc5d0 ",(0,l.kt)("inlineCode",{parentName:"p"},"kubectl"),", ",(0,l.kt)("inlineCode",{parentName:"p"},"eksctl"),", ",(0,l.kt)("inlineCode",{parentName:"p"},"eksctl-anywhere"),", ",(0,l.kt)("inlineCode",{parentName:"p"},"aws-iam-authenticator")," \ub4f1\uc774 \uc124\uce58\ub418\uc5b4 \uc788\ub294\uc9c0 \ud655\uc778\ud55c\ub2e4."),(0,l.kt)("p",null,(0,l.kt)("a",{parentName:"p",href:"https://anywhere.eks.amazonaws.com/docs/getting-started/install/"},"https://anywhere.eks.amazonaws.com/docs/getting-started/install/")),(0,l.kt)("p",null,(0,l.kt)("inlineCode",{parentName:"p"},"homelab")," \uc774\ub984\uc73c\ub85c \ud074\ub7ec\uc2a4\ud130 \ucee8\ud53c\uadf8\ub97c \uc0dd\uc131\ud55c\ub2e4."),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-sh"},"CLUSTER_NAME=homelab\neksctl anywhere generate clusterconfig $CLUSTER_NAME \\\n   --provider vsphere > $CLUSTER_NAME.yaml\n")),(0,l.kt)("p",null,"\ubaa8\ub4e0 \ucee8\ud53c\uadf8\uc5d0 \ub300\ud55c \uc0c1\uc138 \uc124\uc815\uc740 ",(0,l.kt)("a",{parentName:"p",href:"https://anywhere.eks.amazonaws.com/docs/reference/clusterspec/vsphere/"},"vSphere configuration")," \uc5d0\uc11c \ud655\uc778\ud560 \uc218 \uc788\ub2e4. "),(0,l.kt)("p",null,"\uc0dd\uc131\ub41c \ucee8\ud53c\uadf8\ub97c \ud558\ub098\uc529 \uc0b4\ud3b4\ubcf4\uc790. "),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-yaml"},'apiVersion: anywhere.eks.amazonaws.com/v1alpha1\nkind: Cluster\nmetadata:\n  name: homelab\n  namespace: default\nspec:\n  clusterNetwork:\n    cni: cilium\n    pods:\n      cidrBlocks:\n      - 192.168.0.0/20\n    services:\n      cidrBlocks:\n      - 10.96.0.0/12\n  controlPlaneConfiguration:\n    count: 2\n    endpoint:\n      host: 192.168.31.3\n    machineGroupRef:\n      kind: VSphereMachineConfig\n      name: homelab-cp\n  datacenterRef:\n    kind: VSphereDatacenterConfig\n    name: homelab\n  externalEtcdConfiguration:\n    count: 1\n    machineGroupRef:\n      kind: VSphereMachineConfig\n      name: homelab-etcd\n  gitOpsRef:\n    kind: GitOpsConfig\n    name: cluster-gitops\n  kubernetesVersion: "1.21"\n  managementCluster:\n    name: homelab\n  workerNodeGroupConfigurations:\n  - count: 2\n    machineGroupRef:\n      kind: VSphereMachineConfig\n      name: homelab\n    name: md-0\n')),(0,l.kt)("p",null,"\uccab\ubc88\uc9f8\ub294 ",(0,l.kt)("inlineCode",{parentName:"p"},"Cluster")," \ub9ac\uc18c\uc2a4\ub85c Cluster\uc758 \uc774\ub984\uacfc \ud074\ub7ec\uc2a4\ud130 \uc804\ubc18 \uc124\uc815\uacfc Control Plane, Data Plane, etcd VM\uc758 \ubc84\uc804, \uac1c\uc218 \ub4f1\uc744 \uc815\ud560 \uc218 \uc788\ub2e4. "),(0,l.kt)("p",null,"\ud074\ub7ec\uc2a4\ud130 \uc774\ub984\uc740 ",(0,l.kt)("inlineCode",{parentName:"p"},"homelab"),"\uc73c\ub85c \uc124\uc815\ud55c\ub2e4. \uae30\ubcf8\uc801\uc73c\ub85c CNI\ub294 Cilium\uc744 \uc0ac\uc6a9\ud558\ub294 \uad6c\uc870\uc774\uae30 \ub54c\ubb38\uc5d0 \ud544\uc218\uc801\uc73c\ub85c ",(0,l.kt)("inlineCode",{parentName:"p"},"cilium"),"\ub85c \uc124\uc815\ud574\uc57c \ud55c\ub2e4. \uadf8\ub9ac\uace0 kubeadm \uad6c\uc131\uc2dc \ud544\uc694\ud55c ",(0,l.kt)("inlineCode",{parentName:"p"},"pods.cidrBlocks"),"\uacfc ",(0,l.kt)("inlineCode",{parentName:"p"},"services.cidrBlocks"),"\uc5d0\uc11c \ud30c\ub4dc\uc640 \uc11c\ube44\uc2a4\uac00 \uc0ac\uc6a9\ud560 \ub124\ud2b8\uc6cc\ud06c \ub300\uc5ed\uc744 \uc124\uc815\ud55c\ub2e4. \ub458\ub2e4 CNI\uc5d0\uc11c \ud1b5\uc2e0\ub418\ub294 \uac00\uc0c1 \ub124\ud2b8\uc6cc\ud06c \ub300\uc5ed\uc774\uae30 \ub54c\ubb38\uc5d0 \ud604\uc7ac \uc0ac\uc6a9\uc911\uc778 \uc0e4\uc624\ubbf8 \uacf5\uc720\uae30 \ub300\uc5ed(192.168.31.x)\uacfc \ucda9\ub3cc\ud558\uc9c0 \uc54a\uc73c\uba74\uc11c \ub77c\uc6b0\ud305\uc5d0 \ubb38\uc81c\ub418\uc9c0 \uc54a\uace0 \ud604\uc7ac \ub124\ud2b8\uc6cc\ud06c\uc5d0 \uc0ac\uc6a9\ub418\uc9c0 \uc54a\ub294 \ub300\uc5ed(192.168.0.0/20, 10.96.0.0/12) \uc73c\ub85c \uc124\uc815\ud588\ub2e4.  "),(0,l.kt)("blockquote",null,(0,l.kt)("p",{parentName:"blockquote"},"DHCP \uc720\uc758\uc0ac\ud56d: \ubcf8\uc778\uc758 \uacbd\uc6b0 Xiaomi \uacf5\uc720\uae30\ub97c \uc0ac\uc6a9\uc911\uc778\ub370 \ubcc4\ub3c4\uc758 DHCP\uc11c\ubc84\ub97c \uad6c\uc131\ud558\uc9c0 \uc54a\uace0 \uc0ac\uc6a9\uc744 \ud558\uace0 \uc788\uc5b4\uc11c\uc778\uc9c0, \uc2e0\uaddc \ub178\ub4dc\ub97c \uc704\ud55c VM\uc774 \uc0dd\uc131\ub418\uace0 ",(0,l.kt)("inlineCode",{parentName:"p"},"bottlerocket")," OS\uac00 \uae30\ub3d9\ub420\ub54c \ud638\uc2a4\ud2b8\uba85\uc774 ",(0,l.kt)("inlineCode",{parentName:"p"},"MiWifi-R3600-SRV")," \uc774\ub7f0\uc2dd\uc73c\ub85c \ub300\uc18c\ubb38\uc790\ub97c \ud3ec\ud568\ud55c \ud615\ud0dc\ub85c \uc790\ub3d9 \uc0dd\uc131\ub418\ub2e4 \ubcf4\ub2c8 \ubd80\ud305\uc774 \ub418\uc9c0 \uc54a\ub294 \ud604\uc0c1\uc774 \ubc1c\uc0dd\ud588\ub2e4. \uc774\uc5d0 ",(0,l.kt)("a",{parentName:"p",href:"https://anywhere.eks.amazonaws.com/docs/reference/vsphere/vsphere-dhcp/"},"\ubcc4\ub3c4\uc758 DHCP \uad6c\uc131"),"\uc744 \ud1b5\ud574 \uc9c4\ud589\uc744 \ud558\uba74 \ud574\ub2f9 \uc774\uc288\ub97c \ud53c\ud560\uc218 \uc788\ub2e4. ")),(0,l.kt)("p",null,(0,l.kt)("inlineCode",{parentName:"p"},"controlPlaneConfiguration")," \ud544\ub4dc\uc5d0\uc11c\ub294 controlPlane \ub178\ub4dc\uc758 ",(0,l.kt)("inlineCode",{parentName:"p"},"count"),"\uc640 ",(0,l.kt)("inlineCode",{parentName:"p"},"endpoint"),"\ub97c \uc124\uc815\ud574\uc57c \ud55c\ub2e4. ",(0,l.kt)("inlineCode",{parentName:"p"},"count")," \ucd08\uae30 \uac12\uc740 ",(0,l.kt)("inlineCode",{parentName:"p"},"2"),"\ub85c \ub418\uc5b4 \uc788\uc9c0\ub9cc \ud648\ub7a9\uc758 \uc790\uc6d0\uc774 \ubd80\uc871\ud558\uae30 \ub54c\ubb38\uc5d0 ",(0,l.kt)("inlineCode",{parentName:"p"},"1"),"\ub85c \uc124\uc815\ud588\ub2e4. \uc2e4\uc81c \ud504\ub85c\ub355\uc158\uc5d0\uc11c\ub294 2\uc774\uc0c1\uc744 \uad8c\uace0\ud55c\ub2e4. \uadf8\ub9ac\uace0 ",(0,l.kt)("inlineCode",{parentName:"p"},"endpoint.host"),"\ub294 \ucfe0\ubc84\ub124\ud2f0\uc2a4 API\uc11c\ubc84 \uc5d4\ub4dc\ud3ec\uc778\ud2b8\ub85c \uc2e4\uc81c kubectl \uba85\ub839 \ubc0f \uc0ac\uc6a9\uc790\uc640 \uc778\ud130\ud398\uc774\uc2a4\ub97c \uc704\ud55c \uc811\uadfc \uac00\ub2a5\ud55c DHCP \ud560\ub2f9\uc73c\ub85c \ucda9\ub3cc\ub418\uc9c0 \uc54a\ub294 \ub124\ud2b8\uc6cc\ud06c \ub300\uc5ed\uc758 \uace0\uc815 IP\ub85c \uc124\uc815\ud55c\ub2e4. ",(0,l.kt)("inlineCode",{parentName:"p"},"machineGroupRef"),"\ub294 \uc774\ud6c4 \uc0dd\uc131\ud560 VM spec\uc5d0 \ub9e4\uce6d\uc2dc\ud0ac label \uac12\uc73c\ub85c \uc790\ub3d9 \uc0dd\uc131\ub41c\ub2e4. "),(0,l.kt)("p",null,(0,l.kt)("inlineCode",{parentName:"p"},"externalEtcdConfiguration"),"\ub294 etcd \uad6c\uc131\uc744 \uc704\ud55c \ud544\ub4dc\ub85c ",(0,l.kt)("inlineCode",{parentName:"p"},"count"),"\ub294 \uae30\ubcf8\uc124\uc815 \uac12\uc774 ",(0,l.kt)("inlineCode",{parentName:"p"},"3"),"\uc774\uc9c0\ub9cc \ud648\ub7a9 \ud658\uacbd\uc5d0\uc11c\ub294 ",(0,l.kt)("inlineCode",{parentName:"p"},"1"),"\ub85c \uad6c\uc131\ud558\uc600\ub2e4. \uc2e4\uc81c \ud504\ub85c\ub355\uc158\uc5d0\uc11c\ub294 Raft \uc54c\uace0\ub9ac\uc998 \uae30\ubc18 Redundancy \uad6c\uc131\uc744 \uc704\ud574 ",(0,l.kt)("inlineCode",{parentName:"p"},"3"),"\uc774\uc0c1\uc744 \uad8c\uace0\ud55c\ub2e4."),(0,l.kt)("p",null,(0,l.kt)("inlineCode",{parentName:"p"},"gitOpsRef"),"\ub294 GitOps \ud615\ud0dc\ub85c \ud074\ub7ec\uc2a4\ud130\ub97c \uad00\ub9ac\ud558\uae30 \uc704\ud574 \ucc38\uc870\ud558\ub294 \uac12\uc73c\ub85c \uc544\ub798 ",(0,l.kt)("inlineCode",{parentName:"p"},"GitOpsConfig")," \uc5d0\uc11c \uc0ac\uc6a9\ud560 \uc774\ub984 ",(0,l.kt)("inlineCode",{parentName:"p"},"cluster-gitops")," \ub97c \uba85\uc2dc\ud55c\ub2e4. "),(0,l.kt)("p",null,(0,l.kt)("inlineCode",{parentName:"p"},"kubernetesVersion"),"\uc740 EKS \ubc30\ud3ec \ubc84\uc804\uc640 \ub3d9\uc77c\ud55c ",(0,l.kt)("inlineCode",{parentName:"p"},"1.21"),"\ub85c \uc124\uc815\ud55c\ub2e4. "),(0,l.kt)("p",null,(0,l.kt)("inlineCode",{parentName:"p"},"workerNodeGroupConfigurations"),"\uc740 \uc6cc\ucee4\ub178\ub4dc \uad6c\uc131\uc73c\ub85c ",(0,l.kt)("inlineCode",{parentName:"p"},"count"),"\ub97c ",(0,l.kt)("inlineCode",{parentName:"p"},"2"),"\ub85c \uc124\uc815\ud558\uc600\ub2e4. "),(0,l.kt)("p",null,"\ub2e4\uc74c\uc740 \ubc30\ud3ec\ub418\ub294 vSphere spec\uc744 \uc815\uc758\ud558\ub294 \ub9ac\uc18c\uc2a4\ub85c ",(0,l.kt)("inlineCode",{parentName:"p"},"VSphereDatacenterConfig"),"\uc774\ub2e4."),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-yaml"},'apiVersion: anywhere.eks.amazonaws.com/v1alpha1\nkind: VSphereDatacenterConfig\nmetadata:\n  name: homelab\nspec:\n  datacenter: "Datacenter"\n  insecure: false\n  network: "VM Network"\n  server: "192.168.31.2"\n  thumbprint: "**:89:91:5B:02:50:F6:41:D0:DE:6B:A0:B8:43:41:A4:81:03:**"\n')),(0,l.kt)("p",null,(0,l.kt)("inlineCode",{parentName:"p"},"spec"),"\uc5d0\uc11c\ub294 \uc2e4\uc81c vCenter\uc758 \uc5d4\ub4dc\ud3ec\uc778\ud2b8, datacenter, network \uc815\ubcf4 \ub4f1\uc744 \uc785\ub825\ud55c\ub2e4. "),(0,l.kt)("blockquote",null,(0,l.kt)("p",{parentName:"blockquote"},"\uc720\uc758\uc0ac\ud56d : ",(0,l.kt)("inlineCode",{parentName:"p"},"insecure")," \uc635\uc158\uc758 \uacbd\uc6b0 \uae30\ubcf8\uac12\uc774 false\ub85c \ub418\uc5b4 \uc788\ub2e4. \ud574\ub2f9 \uac12\uc774 ",(0,l.kt)("inlineCode",{parentName:"p"},"false"),"\uc758 \uacbd\uc6b0 \uc544\ub798 \uadf8\ub9bc\uc5d0 \uc788\ub294 \uac83 \ucc98\ub7fc \ubcf4\ud1b5 vCenter \uba54\ub274\uc5d0\uc11c ",(0,l.kt)("inlineCode",{parentName:"p"},"thumbprint")," \uac12\uc744 \ud655\uc778\ud560 \uc218 \uc788\uace0 \ud574\ub2f9 \uac12\uc744 ",(0,l.kt)("inlineCode",{parentName:"p"},"**:89:91:5B:02:50:F6:41:D0:DE:6B:A0:B8:43:41:A4:81:03:**")," \ud615\ud0dc\ub85c \ubcc0\uacbd\ud558\uc5ec \uc0ac\uc6a9\ud558\uac70\ub098 ",(0,l.kt)("a",{parentName:"p",href:"https://github.com/vmware/govmomi/tree/master/govc"},"govc"),"\ub97c \uc0ac\uc6a9\ud558\uc5ec ",(0,l.kt)("inlineCode",{parentName:"p"},"govc about.cert -thumbprint -k")," \uba85\ub839\uc5b4\ub85c \ud655\uc778\uc774 \uac00\ub2a5\ud558\ub2e4.")),(0,l.kt)("p",null,(0,l.kt)("img",{alt:"cert",src:t(62453).Z,width:"1762",height:"1214"})),(0,l.kt)("p",null,"\ub9c8\uc9c0\ub9c9\uc740 \uac01 \ub178\ub4dc \uc5ed\ud560(control plane, etcd, worker)\ubcc4\ub85c \uc0ac\uc6a9\ud560 OS \ubc0f \ub9ac\uc18c\uc2a4 spec\uc744 \uc815\uc758\ud558\ub294 \ucee8\ud53c\uadf8\uc774\ub2e4. \uc704 ",(0,l.kt)("inlineCode",{parentName:"p"},"Cluster")," \ub9ac\uc18c\uc2a4\uc5d0\uc11c \uc124\uc815\ub41c ",(0,l.kt)("inlineCode",{parentName:"p"},"machineGroupRef.name"),"\uc73c\ub85c \ub9e4\uce6d\ub418\ub294 \uac12\uc744 metadata\ub85c \uc790\ub3d9 \uc0dd\uc131 \ud574\uc8fc\uace0 \ubaa8\ub450 \uc720\uc0ac\ud558\uae30 \ub54c\ubb38\uc5d0 \uc774\uc911 ",(0,l.kt)("inlineCode",{parentName:"p"},"VSphereMachineConfig"),"\ub9cc \uc0b4\ud3b4\ubcf8\ub2e4. "),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-yaml"},'apiVersion: anywhere.eks.amazonaws.com/v1alpha1\nkind: VSphereMachineConfig\nmetadata:\n  name: homelab-cp\nspec:\n  datastore: "datastore2"\n  diskGiB: 25\n  folder: "cp"\n  memoryMiB: 8192\n  numCPUs: 2\n  osFamily: bottlerocket\n  resourcePool: "*/Resources"\n  users:\n  - name: ec2-user\n    sshAuthorizedKeys:\n    - ssh-rsa AAAAB3******U= vsphere\n\n')),(0,l.kt)("p",null,"Datacenter\uc5d0 \uad6c\uc131\ud55c ",(0,l.kt)("inlineCode",{parentName:"p"},"datastore"),"\uc911 \uc124\uce58\ub418\ub294 VM \uc601\uc5ed\uc774 \uc0ac\uc6a9\ud560 \ub300\uc0c1 datastore\ub97c \uc785\ub825\ud55c\ub2e4. VM\ub514\uc2a4\ud06c ",(0,l.kt)("inlineCode",{parentName:"p"},"diskGiB"),", Datacenter ",(0,l.kt)("inlineCode",{parentName:"p"},"folder"),", VM\uba54\ubaa8\ub9ac ",(0,l.kt)("inlineCode",{parentName:"p"},"memoryMiB"),", vCPU ",(0,l.kt)("inlineCode",{parentName:"p"},"numCPUs"),"\ub97c \uc785\ub825\ud558\uace0, ",(0,l.kt)("inlineCode",{parentName:"p"},"resourcePool"),"\uc740 \uc9c0\uc815 \ub9ac\uc18c\uc2a4 \uadf8\ub8f9\uc744 \ubcc4\ub3c4\ub85c \uc124\uc815\ud558\uc9c0 \uc54a\uc558\uae30 \ub54c\ubb38\uc5d0 ",(0,l.kt)("inlineCode",{parentName:"p"},'"*/Resources"'),"\ub85c \uc124\uc815\ud55c\ub2e4. \uadf8\ub9ac\uace0 ",(0,l.kt)("inlineCode",{parentName:"p"},"osFamily"),"\ub294 ubuntu, bottlerocket\ub450\uac00\uc9c0\ub85c \uc81c\uacf5\uc774 \ub418\ub294\ub370 \uae30\ubcf8\uac12\uc740 bottlerocket\uc774\uace0, \ud574\ub2f9 \uc774\ubbf8\uc9c0\uc758 \uae30\ubcf8 user\ub294 ",(0,l.kt)("inlineCode",{parentName:"p"},"ec2-user"),"\ub85c \uc124\uc815\ud558\uace0 \ud574\ub2f9 VM\uc5d0 SSH\uc811\uadfc\uc744 \uc704\ud574\uc11c \ubcc4\ub3c4\ub85c \uc0dd\uc131\ud55c ",(0,l.kt)("inlineCode",{parentName:"p"},"sshAuthorizedKeys"),"\ub97c \uc785\ub825\ud55c\ub2e4. "),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-yaml"},"apiVersion: anywhere.eks.amazonaws.com/v1alpha1\nkind: GitOpsConfig\nmetadata:\n  name: cluster-gitops\n  namespace: default\nspec:\n  flux:\n    github:\n      branch: main\n      clusterConfigPath: clusters/homelab\n      fluxSystemNamespace: flux-system\n      owner: ddiiwoong\n      personal: true\n      repository: eks-anywhere-homelab\n")),(0,l.kt)("p",null,"\ub9c8\uc9c0\ub9c9\uc740 \ud074\ub7ec\uc2a4\ud130\ub97c GitOps \uc2a4\ud0c0\uc77c\ub85c \uad00\ub9ac\ud558\uae30 \uc704\ud574 ",(0,l.kt)("inlineCode",{parentName:"p"},"GitOpsConfig"),"\ub97c \ucd94\uac00\ud55c\ub2e4. spec \uc5d0\uc11c \uc0ac\uc6a9\ud560 github\uc758 ",(0,l.kt)("inlineCode",{parentName:"p"},"branch"),", github \ub808\ud3ec \uc544\ub798 \ucee8\ud53c\uadf8\uac00 \uc800\uc7a5\ub420 \uacbd\ub85c\uc778 ",(0,l.kt)("inlineCode",{parentName:"p"},"clusterConfigPath"),", gitops \uc624\ud508\uc18c\uc2a4\uc778 ",(0,l.kt)("a",{parentName:"p",href:"https://fluxcd.io/docs/get-started/"},"Flux"),"\uac00 \uad6c\uc131\ub420 \ub124\uc784\uc2a4\ud398\uc774\uc2a4\uc778 ",(0,l.kt)("inlineCode",{parentName:"p"},"fluxSystemNamespace"),", github account\uc778 ",(0,l.kt)("inlineCode",{parentName:"p"},"owner"),", repo \uc774\ub984\uc774 \ub418\ub294 ",(0,l.kt)("inlineCode",{parentName:"p"},"repository")," \uae4c\uc9c0 \uc124\uc815\ud55c\ub2e4. \ud574\ub2f9 \uad6c\uc131\uc744 \ud3ec\ud568\ud55c \ucc44\ub85c \ud074\ub7ec\uc2a4\ud130\ub97c \ubc30\ud3ec\ud558\uac8c \ub418\uba74 \ud074\ub7ec\uc2a4\ud130\uac00 \uc0dd\uc131\ub418\ub294 \uc911\uc5d0 \uc120\uc5b8\ud55c ",(0,l.kt)("inlineCode",{parentName:"p"},"repository"),"\ub85c \uc774\ud6c4 \uad00\ub9ac\ub420 \ud074\ub7ec\uc2a4\ud130 \ucee8\ud53c\uadf8 \ubc0f kustomize \ud30c\uc77c \ub4f1\uc744 ",(0,l.kt)("inlineCode",{parentName:"p"},"commit"),"\ud558\uac8c \ub41c\ub2e4. "),(0,l.kt)("h2",{id:"\ud074\ub7ec\uc2a4\ud130-\uc0dd\uc131"},"\ud074\ub7ec\uc2a4\ud130 \uc0dd\uc131"),(0,l.kt)("p",null,"\ub098\uba38\uc9c0 etcd, worker node \ub3c4 ",(0,l.kt)("inlineCode",{parentName:"p"},"VSphereMachineConfig"),"\ub97c \ub3d9\uc77c\ud55c \ud615\uc2dd\uc73c\ub85c \uc791\uc131\ud558\uace0, vSphere \uad00\ub828 \uc778\uc99d\uc815\ubcf4\uc640 gitops\ub85c \ud65c\uc6a9\ud560 \ub808\ud3ec\uc758 github token\uc744 \ud658\uacbd\ubcc0\uc218\ub85c \uc785\ub825\ud558\uc5ec \ud074\ub7ec\uc2a4\ud130 \uc0dd\uc131\uc744 \uc9c4\ud589\ud55c\ub2e4. \ud648\ub7a9\uc73c\ub85c \uad6c\uc131\ud55c \uc0d8\ud50c \ucee8\ud53c\uadf8\ub294 ",(0,l.kt)("a",{parentName:"p",href:"https://raw.githubusercontent.com/ddiiwoong/eks-anywhere-homelab/main/clusters/homelab/homelab/eksa-system/eksa-cluster.yaml"},"\ub9c1\ud06c"),"\uc5d0\uc11c \ud655\uc778\ud560 \uc218 \uc788\ub2e4. "),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-sh"},"> export EKSA_VSPHERE_USERNAME='administrator@ddii.local'\n> export EKSA_VSPHERE_PASSWORD='***********'\n> export EKSA_GITHUB_TOKEN=ghp_************************\n> eksctl anywhere create cluster -f homelab.yaml\nWarning: The recommended size of an external etcd cluster is 3 or 5\nChecking Github Access Token permissions\n\u2705 Github personal access token has the required repo permissions\nPerforming setup and validations\n\u2705 Connected to server\n\u2705 Authenticated to vSphere\n\u2705 Datacenter validated\n\u2705 Network validated\n\u2705 Datastore validated\n\u2705 Folder validated\n\u2705 Resource pool validated\n\u2705 Datastore validated\n\u2705 Folder validated\n\u2705 Resource pool validated\n\u2705 Datastore validated\n\u2705 Folder validated\n\u2705 Resource pool validated\n\u2705 Control plane and Workload templates validated\n\u2705 Vsphere Provider setup is valid\n\u2705 Flux path\n\u2705 Create preflight validations pass\nCreating new bootstrap cluster\nInstalling cluster-api providers on bootstrap cluster\nProvider specific setup\nCreating new workload cluster\nInstalling networking on workload cluster\nInstalling storage class on workload cluster\nInstalling cluster-api providers on workload cluster\nInstalling EKS-A secrets on workload cluster\nMoving cluster management from bootstrap to workload cluster\nInstalling EKS-A custom components (CRD and controller) on workload cluster\nCreating EKS-A CRDs instances on workload cluster\nInstalling AddonManager and GitOps Toolkit on workload cluster\nAdding cluster configuration files to Git\nEnumerating objects: 20, done.\nCounting objects: 100% (20/20), done.\nCompressing objects: 100% (12/12), done.\nTotal 20 (delta 1), reused 19 (delta 0), pack-reused 0\nFinalized commit and committed to local repository  {\"hash\": \"ea4293c849725e593704c2a8ff71a708ad8cf8f2\"}\nWriting cluster config file\nDeleting bootstrap cluster\n\ud83c\udf89 Cluster created!\n")),(0,l.kt)("p",null,"\uac01 \ub2e8\uacc4\ub97c \uc21c\uc11c\ub300\ub85c \uac04\ub2e8\ud788 \uc0b4\ud3b4\ubcf4\uba74 \ucc98\uc74c bootstrap cluster \uad6c\uc131 \ub2e8\uacc4\uc5d0\uc11c\ub294 \uc544\ub798\uc640 \uac19\uc740 \uc77c\uc744 \uc218\ud589\ud55c\ub2e4."),(0,l.kt)("ul",null,(0,l.kt)("li",{parentName:"ul"},"Github Access Token \uad8c\ud55c \ud655\uc778"),(0,l.kt)("li",{parentName:"ul"},"vSphere \uc778\uc99d"),(0,l.kt)("li",{parentName:"ul"},"vSphere \ub9ac\uc18c\uc2a4(Datacenter, Network, Datastore, Folder \ub4f1) \uac80\uc99d"),(0,l.kt)("li",{parentName:"ul"},"Control Plane, Workload Plane \ud15c\ud50c\ub9bf \uac80\uc99d"),(0,l.kt)("li",{parentName:"ul"},"kind\ub85c bootstrap cluster \uc0dd\uc131"),(0,l.kt)("li",{parentName:"ul"},"cluster-api provider \uc5ed\ud560\uc744 \ud558\ub294 CAPI(Cluster API) \uc124\uce58")),(0,l.kt)("p",null,"\ub2e4\uc74c\uc740 \uc0dd\uc131\ub41c bootstrap cluster\uc758 CAPI \uad00\ub9ac\ub3c4\uad6c\uac00 vSphere \ud074\ub7ec\uc2a4\ud130\uc5d0 \uc5f0\uacb0\ud6c4\uc5d0 \uc9c4\ud589\ud55c\ub2e4."),(0,l.kt)("ul",null,(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("a",{parentName:"li",href:"https://github.com/vmware/govmomi/tree/master/govc"},"govc"),"\ub97c \uc0ac\uc6a9\ud574\uc11c \uc5f0\uacb0\ub41c vSphere \ud074\ub7ec\uc2a4\ud130\uc5d0 \uc0c8\ub85c\uc6b4 etcd\ub97c \ud3ec\ud568\ud55c Control, Workload \ub178\ub4dc \uc0dd\uc131"),(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("a",{parentName:"li",href:"https://cilium.io/"},"Cilium")," CNI \ucd94\uac00"),(0,l.kt)("li",{parentName:"ul"},"Storage Class \ucd94\uac00"),(0,l.kt)("li",{parentName:"ul"},"\uad6c\uc131\ub41c Workload Cluster\uc5d0 CAPI \ucd94\uac00",(0,l.kt)("ul",{parentName:"li"},(0,l.kt)("li",{parentName:"ul"},"provider \uc14b\uc5c5"),(0,l.kt)("li",{parentName:"ul"},"\ucd94\uac00\uc801\uc778 CRD \ubc0f GitOps \ucef4\ud3ec\ub10c\ud2b8 \ucd94\uac00"))),(0,l.kt)("li",{parentName:"ul"},"GitOps\ub97c \uc704\ud574 \ucd5c\ucd08 \uc0dd\uc131\ub41c cluster config\ub97c \uc9c0\uc815\ud55c repo\uc5d0 Commit "),(0,l.kt)("li",{parentName:"ul"},"\ub9c8\uc9c0\ub9c9\uc73c\ub85c \ub85c\uceec \uad00\ub9ac \uba38\uc2e0\uc5d0 cluster config\ub97c \uc800\uc7a5")),(0,l.kt)("p",null,"\uac01\uac01\uc758 \ub2e8\uacc4\uc5d0 \ub300\ud55c \uc124\uba85\uc740 ",(0,l.kt)("a",{parentName:"p",href:"https://anywhere.eks.amazonaws.com/docs/concepts/clusterworkflow/#4-authenticate-and-create-bootstrap-cluster"},"\ub2e4\uc74c \ub9c1\ud06c"),"\uc5d0\uc11c \ud655\uc778\ud560 \uc218 \uc788\ub2e4. "),(0,l.kt)("p",null,"\ucc98\uc74c \uba87\ubc88 \uc2dc\ub3c4\ub97c \ud558\ub2e4\ubcf4\uba74 \uc5ec\ub7ec\uac00\uc9c0 \uc5d0\ub7ec\uc0ac\ud56d\uc744 \ub9cc\ub098\uac8c \ub41c\ub2e4. \ud574\ub2f9 \ub2e8\uacc4\uc758 \ub514\ubc84\uadf8 \ub808\ubca8 \ucd9c\ub825\uc744 \ubcf4\uae30 \uc704\ud574\uc11c\ub294 ",(0,l.kt)("inlineCode",{parentName:"p"},"-v 9")," \ud50c\ub798\uadf8\ub97c \ucd94\uac00\ud574\uc11c \uc124\uce58\ub97c \uc9c4\ud589\ud558\uba74 \uc0c1\uc138 \ub0b4\uc5ed\uc744 \ud655\uc778\ud560 \uc218 \uc788\ub294\ub370 debug \ub808\ubca8\ub85c \ub9c8\uc9c0\ub9c9 \uba87\uc904 \ub85c\uadf8\ub97c  \uc0b4\ud3b4\ubcf4\uba74 \ub3c4\ucee4\uc5d0\uc11c kind\ub85c \ub3c4\ucee4\ub0b4\uc5d0 \ud074\ub7ec\uc2a4\ud130\ub97c \uad6c\uc131\ud55c \uc774\ud6c4\uc5d0 docker\ub0b4 kind \ud074\ub7ec\uc2a4\ud130\ub97c \uc0ad\uc81c\ud558\ub294 \uac83\uc744 \ud655\uc778\ud560 \uc218 \uc788\ub2e4. "),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-sh"},'2022-03-04T15:23:33.638+0900    V4      Deleting kind cluster   {"name": "homelab-eks-a-cluster"}\n2022-03-04T15:23:33.638+0900    V6      Executing command       {"cmd": "/usr/local/bin/docker exec -i eksa_1646374542969789000 kind delete cluster --name homelab-eks-a-cluster"}\nDeleting cluster "homelab-eks-a-cluster" ...\n2022-03-04T15:23:36.244+0900    V0      \ud83c\udf89 Cluster upgraded!\n2022-03-04T15:23:36.244+0900    V4      Task finished   {"task_name": "delete-kind-cluster", "duration": "4.560798797s"}\n2022-03-04T15:23:36.244+0900    V4      ----------------------------------\n2022-03-04T15:23:36.244+0900    V4      Tasks completed {"duration": "7m50.030420843s"}\n2022-03-04T15:23:37.227+0900    V3      Cleaning up long running container      {"name": "eksa_1646374542969789000"}\n2022-03-04T15:23:37.228+0900    V6      Executing command       {"cmd": "/usr/local/bin/docker rm -f -v eksa_1646374542969789000"}\n')),(0,l.kt)("p",null,"\uba87\uac00\uc9c0 \uacbd\ud5d8\ud55c \uc5d0\ub7ec \uc0ac\ud56d\uc744 \ub098\uc5f4\ud574 \ubcf4\uba74 \uc704\uc5d0\uc11c\ub3c4 \uc5b8\uae09\ud55c \ub0b4\uc6a9\uacfc \uac19\uc774 Cluster \ucee8\ud53c\uadf8 \ub0b4 ",(0,l.kt)("inlineCode",{parentName:"p"},"vSphere thumbprint"),"\ub97c \ubc18\ub4dc\uc2dc \ub123\uc5b4\uc8fc\ub294\uac83\uc774 \uc88b\ub2e4. \uacf5\uc2dd \uac00\uc774\ub4dc\uc5d0\ub294 ",(0,l.kt)("inlineCode",{parentName:"p"},"insecure")," \ud544\ub4dc\ub97c true\ub85c \uc124\uc815\ud558\uace0 ",(0,l.kt)("inlineCode",{parentName:"p"},"thumbprint"),"\ub97c null\ub85c \uc9c4\ud589\ud560 \uacbd\uc6b0 \uc544\ub798\uc640 \uac19\uc774 kubeconfg secret\uc744 \uad6c\uc131\ub2e8\uacc4\uc5d0\uc11c \uc2e4\ud328\ud558\uac70\ub098 Workload \ub178\ub4dc\uac00 join\ud560 \ub54c \uc5d0\ub7ec\uac00 \ubc1c\uc0dd\ud558\uac8c \ub41c\ub2e4.  "),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-sh"},'$ eksctl anywhere create cluster -f eksa-mgmt-cluster.yaml\n...\ncollecting management cluster diagnostics\n\u23f3 Collecting support bundle from cluster, this can take a while {"cluster": "bootstrap-cluster", "bundle": "mgmt/generated/bootstrap-cluster-2022-03-02T23:25:32+09:00-bundle.yaml", "since": 1646227532274217000, "kubeconfig": "mgmt/generated/mgmt.kind.kubeconfig"}\nSupport bundle archive created  {"path": "support-bundle-2022-03-02T14_25_34.tar.gz"}\nAnalyzing support bundle    {"bundle": "mgmt/generated/bootstrap-cluster-2022-03-02T23:25:32+09:00-bundle.yaml", "archive": "support-bundle-2022-03-02T14_25_34.tar.gz"}\nAnalysis output generated   {"path": "mgmt/generated/bootstrap-cluster-2022-03-02T23:27:23+09:00-analysis.yaml"}\ncollecting workload cluster diagnostics\nError: failed to create cluster: error checking availability of kubeconfig secret: kubeconfig secret does not exist\n')),(0,l.kt)("p",null,"\uc815\uc0c1\uc801\uc73c\ub85c \ud074\ub7ec\uc2a4\ud130 \ubc30\ud3ec\uac00 \ub418\uc5c8\uc73c\uba74 eksctl config yaml\uc774 \ud3ec\ud568\ub41c \ub514\ub809\ud1a0\ub9ac \ud558\uc704\uc5d0 \ud074\ub7ec\uc2a4\ud130 \uc774\ub984\uc73c\ub85c \uc0c8\ub85c\uc6b4 \ub514\ub809\ud1a0\ub9ac\uc640 ",(0,l.kt)("inlineCode",{parentName:"p"},"kubeconfig"),"\uc640 \uc2e4\uc81c \ubc30\ud3ec\ub41c cluster config\ub97c \ud655\uc778 \ud560 \uc218 \uc788\ub2e4. "),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre"},"> tree\n.\n\u251c\u2500\u2500 homelab\n\u2502   \u251c\u2500\u2500 homelab-eks-a-cluster.kubeconfig\n\u2502   \u2514\u2500\u2500 homelab-eks-a-cluster.yaml\n\u251c\u2500\u2500 homelab.yaml\n")),(0,l.kt)("p",null,"\uae30\uc874 kubeconfig\uc640 merge\ub97c \uc704\ud574 ",(0,l.kt)("a",{parentName:"p",href:"https://github.com/kubernetes-sigs/krew"},"krew"),"\ub97c \ud1b5\ud574 \uc124\uce58\ud55c  ",(0,l.kt)("a",{parentName:"p",href:"https://github.com/corneliusweig/konfig"},"konfig")," \ub3c4\uad6c\ub97c \uc0ac\uc6a9\ud574\uc11c \uae30\uc874 \ucee8\ud53c\uadf8\uc640 \ubcd1\ud569\ud55c\ub2e4. "),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-sh"},"> kubectl konfig merge ~/.kube/config ./homelab/homelab-eks-a-cluster.kubeconfig > merged-and-flattened-config\n> mv merged-and-flattened-config ~/.kube/config\n")),(0,l.kt)("p",null,"\uc0dd\uc131\ub41c \ub9ac\uc18c\uc2a4\ub97c \ud655\uc778\ud574\ubcf4\uba74 ",(0,l.kt)("inlineCode",{parentName:"p"},"Bottlerocket")," OS \uc774\ubbf8\uc9c0\uc640 ",(0,l.kt)("inlineCode",{parentName:"p"},"containerd://1.5.8+bottlerocket")," CRI\ub97c \ud655\uc778\ud560 \uc218 \uc788\ub2e4. \ub178\ub4dc \uc774\ub984\uc774 IP\ub85c \ubcf4\uc774\ub294 \uc774\uc720\ub294 DHCP\uc11c\ubc84\ub97c \ubcc4\ub3c4\ub85c \ub450\uc9c0 \uc54a\uc544 Prefix \ud560\ub2f9\uc774 \ub418\uc9c0 \uc54a\ub294 \uac00\uc815\uc6a9 \uacf5\uc720\uae30 \ud658\uacbd\uc5d0\uc11c \ubc1c\uc0dd\ud558\ub294 \ud604\uc0c1\uc774\ub2e4. "),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-sh"},"> kubectl get node -o wide\nNAME             STATUS   ROLES                  AGE     VERSION   INTERNAL-IP      EXTERNAL-IP      OS-IMAGE                                  KERNEL-VERSION   CONTAINER-RUNTIME\n192.168.31.186   Ready    control-plane,master   9m     v1.21.6   192.168.31.186   192.168.31.186   Bottlerocket OS 1.5.3 (vmware-k8s-1.21)   5.10.93          containerd://1.5.8+bottlerocket\n192.168.31.187   Ready    <none>                 8m     v1.21.6   192.168.31.187   192.168.31.187   Bottlerocket OS 1.5.3 (vmware-k8s-1.21)   5.10.93          containerd://1.5.8+bottlerocket\n192.168.31.188   Ready    <none>                 7m     v1.21.6   192.168.31.188   192.168.31.188   Bottlerocket OS 1.5.3 (vmware-k8s-1.21)   5.10.93          containerd://1.5.8+bottlerocket\n192.168.31.189   Ready    control-plane,master   7m     v1.21.6   192.168.31.189   192.168.31.189   Bottlerocket OS 1.5.3 (vmware-k8s-1.21)   5.10.93          containerd://1.5.8+bottlerocket\n")),(0,l.kt)("p",null,"CRD \ub9ac\uc2a4\ud2b8\ub97c \ud655\uc778\ud574\ubcf4\uc790. \ub9ce\uc740 CRD\uc911\uc5d0 ",(0,l.kt)("inlineCode",{parentName:"p"},"x-k8s.io"),"\ub85c \ud544\ud130\ub97c \ud558\uba74 ",(0,l.kt)("inlineCode",{parentName:"p"},"machine"),", ",(0,l.kt)("inlineCode",{parentName:"p"},"vsphere"),", ",(0,l.kt)("inlineCode",{parentName:"p"},"cluster")," \uad00\ub828\ub41c \uc815\ubcf4\ub97c \ud655\uc778\ud560\uc218 \uc788\ub2e4."),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-sh"},'> kubectl get crd | grep "x-k8s.io"\nclusterclasses.cluster.x-k8s.io                              2022-03-04T14:30:28Z\nclusterresourcesetbindings.addons.cluster.x-k8s.io           2022-03-04T14:30:28Z\nclusterresourcesets.addons.cluster.x-k8s.io                  2022-03-04T14:30:28Z\nclusters.cluster.x-k8s.io                                    2022-03-04T14:30:28Z\netcdadmclusters.etcdcluster.cluster.x-k8s.io                 2022-03-04T14:30:41Z\netcdadmconfigs.bootstrap.cluster.x-k8s.io                    2022-03-04T14:30:38Z\nkubeadmconfigs.bootstrap.cluster.x-k8s.io                    2022-03-04T14:30:34Z\nkubeadmconfigtemplates.bootstrap.cluster.x-k8s.io            2022-03-04T14:30:34Z\nkubeadmcontrolplanes.controlplane.cluster.x-k8s.io           2022-03-04T14:30:45Z\nkubeadmcontrolplanetemplates.controlplane.cluster.x-k8s.io   2022-03-04T14:30:47Z\nmachinedeployments.cluster.x-k8s.io                          2022-03-04T14:30:29Z\nmachinehealthchecks.cluster.x-k8s.io                         2022-03-04T14:30:29Z\nmachinepools.cluster.x-k8s.io                                2022-03-04T14:30:30Z\nmachines.cluster.x-k8s.io                                    2022-03-04T14:30:30Z\nmachinesets.cluster.x-k8s.io                                 2022-03-04T14:30:30Z\nproviders.clusterctl.cluster.x-k8s.io                        2022-03-04T14:27:56Z\nvsphereclusteridentities.infrastructure.cluster.x-k8s.io     2022-03-04T14:30:51Z\nvsphereclusters.infrastructure.cluster.x-k8s.io              2022-03-04T14:30:52Z\nvsphereclustertemplates.infrastructure.cluster.x-k8s.io      2022-03-04T14:30:52Z\nvspheredeploymentzones.infrastructure.cluster.x-k8s.io       2022-03-04T14:30:52Z\nvspherefailuredomains.infrastructure.cluster.x-k8s.io        2022-03-04T14:30:53Z\nvspheremachines.infrastructure.cluster.x-k8s.io              2022-03-04T14:30:53Z\nvspheremachinetemplates.infrastructure.cluster.x-k8s.io      2022-03-04T14:30:53Z\nvspherevms.infrastructure.cluster.x-k8s.io                   2022-03-04T14:30:54Z\n')),(0,l.kt)("p",null,"\uc774\uc911 ",(0,l.kt)("inlineCode",{parentName:"p"},"machine")," CRD\ub97c \ud655\uc778\ud574\ubcf4\uba74 etcd\ub97c \ubcfc \uc218 \uc788\ub294\ub370 \uc774\ub294 VM\uc778\uc2a4\ud134\uc2a4 \ud615\ud0dc\uc758 \uc678\ubd80 \ub9ac\uc18c\uc2a4 \ud615\ud0dc\ub85c \ubc30\ud3ec\ub418\uae30 \ub54c\ubb38\uc5d0 \ucfe0\ubc84\ub124\ud2f0\uc2a4 \ub178\ub4dc \uc815\ubcf4\uc5d0\uc11c\ub294 \ud655\uc778\ud560\uc218 \uc5c6\ub358 ",(0,l.kt)("inlineCode",{parentName:"p"},"etcd")," \uba38\uc2e0\uc744 \ud655\uc778\uc744 \ud560 \uc218 \uc788\ub2e4. "),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre"},"> kubectl get machine -A\nNAMESPACE     NAME                            CLUSTER   NODENAME         PROVIDERID                                       PHASE     AGE     VERSION\neksa-system   homelab-etcd-jrhvt              homelab                    vsphere://421b44b1-6017-8469-734b-01bcf68cb459   Running   11m     \neksa-system   homelab-j5mql                   homelab   192.168.31.186   vsphere://421b4382-0727-3afc-5c47-b73455010d35   Running   11m     v1.21.5-eks-1-21-8\neksa-system   homelab-md-0-76478bb486-jszj4   homelab   192.168.31.187   vsphere://421b4dc9-b7c6-f0a2-0b50-e5379748b9a9   Running   11m     v1.21.5-eks-1-21-8\neksa-system   homelab-md-0-76478bb486-rpxlm   homelab   192.168.31.188   vsphere://421b20a4-9870-cd20-4cff-67bb4a9d8372   Running   11m     v1.21.5-eks-1-21-8\neksa-system   homelab-w6bq8                   homelab   192.168.31.189   vsphere://421befe9-e26a-3f18-9ccf-3fe32dd57fd2   Running   11m     v1.21.5-eks-1-21-8\n")),(0,l.kt)("p",null,"\ucd08\uae30 \uad6c\uc131 \ud30c\ub4dc\ub4e4\uc744 \uc0b4\ud3b4\ubcf4\uba74 CAPI \uad00\ub828 \ub9ac\uc18c\uc2a4, cert-manager, eks-anywhere, Cilium CNI, vSphere \uad00\ub828 \ucee8\ud2b8\ub864\ub7ec \ub4f1\uc744 \ud655\uc778\ud560 \uc218 \uc788\ub2e4. "),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre"},"> kubectl get pod -A\nNAMESPACE                           NAME                                                             READY   STATUS    RESTARTS   AGE\ncapi-kubeadm-bootstrap-system       capi-kubeadm-bootstrap-controller-manager-694cc79bb7-2h29c       1/1     Running   0          3h42m\ncapi-kubeadm-control-plane-system   capi-kubeadm-control-plane-controller-manager-5b6b48dd8c-g6md4   1/1     Running   0          3h42m\ncapi-system                         capi-controller-manager-689cd9b4fd-vxpc8                         1/1     Running   0          3h42m\ncapv-system                         capv-controller-manager-6b467446b9-n865b                         1/1     Running   0          3h42m\ncert-manager                        cert-manager-7988d4fb6c-72fw7                                    1/1     Running   0          3h44m\ncert-manager                        cert-manager-cainjector-6bc8dcdb64-7d7qg                         1/1     Running   0          3h44m\ncert-manager                        cert-manager-webhook-68979bfb95-hjq8m                            1/1     Running   0          3h44m\neksa-system                         eksa-controller-manager-5c74596687-45v8t                         2/2     Running   0          3h41m\netcdadm-bootstrap-provider-system   etcdadm-bootstrap-provider-controller-manager-74c86ffb56-cpw9k   1/1     Running   0          3h42m\netcdadm-controller-system           etcdadm-controller-controller-manager-7894945688-js7z4           1/1     Running   0          3h42m\nkube-system                         cilium-bq5gq                                                     1/1     Running   0          3h44m\nkube-system                         cilium-fn2f7                                                     1/1     Running   0          3h44m\nkube-system                         cilium-lgptt                                                     1/1     Running   0          3h44m\nkube-system                         cilium-operator-86d59d5c88-76z2t                                 1/1     Running   1          3h44m\nkube-system                         cilium-operator-86d59d5c88-9p4s9                                 1/1     Running   0          3h44m\nkube-system                         cilium-w55nc                                                     1/1     Running   0          68m\nkube-system                         cilium-wk89j                                                     1/1     Running   0          68m\nkube-system                         coredns-745c7986c7-k729b                                         1/1     Running   0          3h46m\nkube-system                         coredns-745c7986c7-thtbm                                         1/1     Running   0          3h46m\nkube-system                         kube-apiserver-192.168.31.189                                    1/1     Running   0          3h46m\nkube-system                         kube-controller-manager-192.168.31.189                           1/1     Running   0          3h46m\nkube-system                         kube-proxy-6xcdk                                                 1/1     Running   0          3h44m\nkube-system                         kube-proxy-d4qbv                                                 1/1     Running   0          68m\nkube-system                         kube-proxy-mhzb4                                                 1/1     Running   0          3h46m\nkube-system                         kube-proxy-vrw2p                                                 1/1     Running   0          68m\nkube-system                         kube-proxy-xkfmh                                                 1/1     Running   0          3h44m\nkube-system                         kube-scheduler-192.168.31.189                                    1/1     Running   0          3h46m\nkube-system                         kube-vip-192.168.31.189                                          1/1     Running   0          3h46m\nkube-system                         vsphere-cloud-controller-manager-bxp4t                           1/1     Running   2          68m\nkube-system                         vsphere-cloud-controller-manager-jdncv                           1/1     Running   3          3h44m\nkube-system                         vsphere-cloud-controller-manager-jhbbp                           1/1     Running   2          3h44m\nkube-system                         vsphere-cloud-controller-manager-jpn89                           1/1     Running   2          68m\nkube-system                         vsphere-cloud-controller-manager-qblld                           1/1     Running   1          3h46m\nkube-system                         vsphere-csi-controller-576c9c8dc8-9k2lm                          5/5     Running   0          3h46m\nkube-system                         vsphere-csi-node-9fbs2                                           3/3     Running   0          68m\nkube-system                         vsphere-csi-node-ffjlv                                           3/3     Running   0          3h44m\nkube-system                         vsphere-csi-node-lrkqk                                           3/3     Running   0          68m\nkube-system                         vsphere-csi-node-s49x6                                           3/3     Running   0          3h46m\nkube-system                         vsphere-csi-node-z5hdz                                           3/3     Running   0          3h44m\n")),(0,l.kt)("h2",{id:"\ub85c\ub4dc\ubc38\ub7f0\uc11c-\uad6c\uc131"},"\ub85c\ub4dc\ubc38\ub7f0\uc11c \uad6c\uc131"),(0,l.kt)("p",null,"\ucfe0\ubc84\ub124\ud2f0\uc2a4 v1.14.2 \uc774\ud6c4 \ubc84\uc804\ubd80\ud130\ub294 ",(0,l.kt)("inlineCode",{parentName:"p"},"IPVS"),"\ubaa8\ub4dc\uc5d0\uc11c kube-proxy \uc0ac\uc6a9\uc744 \uc704\ud574 MetalLB \uad6c\uc131\uc804\uc5d0 ",(0,l.kt)("a",{parentName:"p",href:"https://metallb.universe.tf/installation/#preparation"},"strict ARP \ubaa8\ub4dc\ub97c \ud65c\uc131\ud654"),"\ud574\uc57c\ud55c\ub2e4. "),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-sh"},'> kubectl get configmap kube-proxy -n kube-system -o yaml | \\\nsed -e "s/strictARP: false/strictARP: true/" | \\\nkubectl apply -f - -n kube-system\n\n> kubectl describe configmap -n kube-system kube-proxy | grep ARP\n  strictARP: true\n')),(0,l.kt)("p",null,"\ubbf8\ub9ac \uc11c\ube44\uc2a4\uc5d0\uc11c \uc0ac\uc6a9\ud560 IP \ub300\uc5ed\uc744 \uc9c0\uc815\ud558\uae30 \uc704\ud574 helm chart configmap value\ub97c \ubbf8\ub9ac \uc0dd\uc131\ud55c\ub2e4. "),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre"},"cat << 'EOF' >> values.yaml\nconfigInline:\n  address-pools:\n    - name: default\n      protocol: layer2\n      addresses:\n      - 192.168.31.10-192.168.31.19\nEOF\n")),(0,l.kt)("p",null,"metallb\uac00 \uc0ac\uc6a9\ud560 \ub124\uc784\uc2a4\ud398\uc774\uc2a4 ",(0,l.kt)("inlineCode",{parentName:"p"},"metallb-system"),"\ub97c \ub9cc\ub4e4\uace0 \uc704 configmap value\ud30c\uc77c\ub85c metalLB\ub97c \uc124\uce58\ud55c\ub2e4."),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre"},"> helm repo add metallb https://metallb.github.io/metallb\n> kubectl create ns metallb-system\n> helm install metallb metallb/metallb -n metallb-system -f values.yaml\n> kubectl get all -n metallb-system\nNAME                                      READY   STATUS    RESTARTS   AGE\npod/metallb-controller-69bbb4669c-2pdnk   1/1     Running   0          115s\npod/metallb-speaker-2km46                 1/1     Running   0          115s\npod/metallb-speaker-cm9xw                 1/1     Running   0          115s\npod/metallb-speaker-dptbx                 1/1     Running   0          115s\npod/metallb-speaker-jk7hn                 1/1     Running   0          115s\npod/metallb-speaker-kgfkl                 1/1     Running   0          115s\npod/metallb-speaker-t7qkw                 1/1     Running   0          115s\n\nNAME                             DESIRED   CURRENT   READY   UP-TO-DATE   AVAILABLE   NODE SELECTOR            AGE\ndaemonset.apps/metallb-speaker   6         6         6       6            6           kubernetes.io/os=linux   115s\n\nNAME                                 READY   UP-TO-DATE   AVAILABLE   AGE\ndeployment.apps/metallb-controller   1/1     1            1           115s\n\nNAME                                            DESIRED   CURRENT   READY   AGE\nreplicaset.apps/metallb-controller-69bbb4669c   1         1         1       115s\n")),(0,l.kt)("p",null,"metallb \ub9ac\uc18c\uc2a4\uac00 \ubaa8\ub450 \uc815\uc0c1\uc73c\ub85c \uc62c\ub77c\uc624\uba74 \uc11c\ube44\uc2a4 \ud558\ub098\ub97c LoadBalancer \ud0c0\uc785\uc73c\ub85c \ubc30\ud3ec\ud558\uace0 \ud574\ub2f9 \uc11c\ube44\uc2a4\ub85c \uc811\uc18d\ud574\ubcf8\ub2e4.  "),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre"},"> kubectl apply -f https://anywhere.eks.amazonaws.com/manifests/hello-eks-a.yaml\n> kubectl expose deployment hello-eks-a --port=80 --type=LoadBalancer --name=hello-eks-a-lb\n> SVC1EXIP=$(kubectl get svc hello-eks-a-lb -o jsonpath='{.status.loadBalancer.ingress[0].ip}')\n> curl $SVC1EXIP\n\u2b21\u2b22\u2b21\u2b22\u2b21\u2b22\u2b21\u2b22\u2b21\u2b22\u2b21\u2b22\u2b21\u2b22\u2b21\u2b22\u2b21\u2b22\u2b21\u2b22\u2b21\u2b22\u2b21\u2b22\u2b21\u2b22\u2b21\u2b22\u2b21\u2b22\u2b21\u2b22\u2b21\u2b22\u2b21\u2b22\u2b21\u2b22\u2b21\u2b22\u2b21\u2b22\u2b21\u2b22\u2b21\u2b22\u2b21\u2b22\u2b21\u2b22\u2b21\u2b22\u2b21\u2b22\u2b21\u2b22\u2b21\u2b22\u2b21\u2b22\u2b21\u2b22\u2b21\u2b22\u2b21\u2b22\u2b21\u2b22\n\nThank you for using\n\n\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2557\u2588\u2588\u2557  \u2588\u2588\u2557\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2557                                             \n\u2588\u2588\u2554\u2550\u2550\u2550\u2550\u255d\u2588\u2588\u2551 \u2588\u2588\u2554\u255d\u2588\u2588\u2554\u2550\u2550\u2550\u2550\u255d                                             \n\u2588\u2588\u2588\u2588\u2588\u2557  \u2588\u2588\u2588\u2588\u2588\u2554\u255d \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2557                                             \n\u2588\u2588\u2554\u2550\u2550\u255d  \u2588\u2588\u2554\u2550\u2588\u2588\u2557 \u255a\u2550\u2550\u2550\u2550\u2588\u2588\u2551                                             \n\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2557\u2588\u2588\u2551  \u2588\u2588\u2557\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2551                                             \n\u255a\u2550\u2550\u2550\u2550\u2550\u2550\u255d\u255a\u2550\u255d  \u255a\u2550\u255d\u255a\u2550\u2550\u2550\u2550\u2550\u2550\u255d                                             \n                                                                     \n \u2588\u2588\u2588\u2588\u2588\u2557 \u2588\u2588\u2588\u2557   \u2588\u2588\u2557\u2588\u2588\u2557   \u2588\u2588\u2557\u2588\u2588\u2557    \u2588\u2588\u2557\u2588\u2588\u2557  \u2588\u2588\u2557\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2557\u2588\u2588\u2588\u2588\u2588\u2588\u2557 \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2557\n\u2588\u2588\u2554\u2550\u2550\u2588\u2588\u2557\u2588\u2588\u2588\u2588\u2557  \u2588\u2588\u2551\u255a\u2588\u2588\u2557 \u2588\u2588\u2554\u255d\u2588\u2588\u2551    \u2588\u2588\u2551\u2588\u2588\u2551  \u2588\u2588\u2551\u2588\u2588\u2554\u2550\u2550\u2550\u2550\u255d\u2588\u2588\u2554\u2550\u2550\u2588\u2588\u2557\u2588\u2588\u2554\u2550\u2550\u2550\u2550\u255d\n\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2551\u2588\u2588\u2554\u2588\u2588\u2557 \u2588\u2588\u2551 \u255a\u2588\u2588\u2588\u2588\u2554\u255d \u2588\u2588\u2551 \u2588\u2557 \u2588\u2588\u2551\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2551\u2588\u2588\u2588\u2588\u2588\u2557  \u2588\u2588\u2588\u2588\u2588\u2588\u2554\u255d\u2588\u2588\u2588\u2588\u2588\u2557  \n\u2588\u2588\u2554\u2550\u2550\u2588\u2588\u2551\u2588\u2588\u2551\u255a\u2588\u2588\u2557\u2588\u2588\u2551  \u255a\u2588\u2588\u2554\u255d  \u2588\u2588\u2551\u2588\u2588\u2588\u2557\u2588\u2588\u2551\u2588\u2588\u2554\u2550\u2550\u2588\u2588\u2551\u2588\u2588\u2554\u2550\u2550\u255d  \u2588\u2588\u2554\u2550\u2550\u2588\u2588\u2557\u2588\u2588\u2554\u2550\u2550\u255d  \n\u2588\u2588\u2551  \u2588\u2588\u2551\u2588\u2588\u2551 \u255a\u2588\u2588\u2588\u2588\u2551   \u2588\u2588\u2551   \u255a\u2588\u2588\u2588\u2554\u2588\u2588\u2588\u2554\u255d\u2588\u2588\u2551  \u2588\u2588\u2551\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2557\u2588\u2588\u2551  \u2588\u2588\u2551\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2557\n\u255a\u2550\u255d  \u255a\u2550\u255d\u255a\u2550\u255d  \u255a\u2550\u2550\u2550\u255d   \u255a\u2550\u255d    \u255a\u2550\u2550\u255d\u255a\u2550\u2550\u255d \u255a\u2550\u255d  \u255a\u2550\u255d\u255a\u2550\u2550\u2550\u2550\u2550\u2550\u255d\u255a\u2550\u255d  \u255a\u2550\u255d\u255a\u2550\u2550\u2550\u2550\u2550\u2550\u255d\n                                                                     \nYou have successfully deployed the hello-eks-a pod hello-eks-a-9644dd8dc-647bq\n\nFor more information check out\nhttps://anywhere.eks.amazonaws.com\n\n\u2b21\u2b22\u2b21\u2b22\u2b21\u2b22\u2b21\u2b22\u2b21\u2b22\u2b21\u2b22\u2b21\u2b22\u2b21\u2b22\u2b21\u2b22\u2b21\u2b22\u2b21\u2b22\u2b21\u2b22\u2b21\u2b22\u2b21\u2b22\u2b21\u2b22\u2b21\u2b22\u2b21\u2b22\u2b21\u2b22\u2b21\u2b22\u2b21\u2b22\u2b21\u2b22\u2b21\u2b22\u2b21\u2b22\u2b21\u2b22\u2b21\u2b22\u2b21\u2b22\u2b21\u2b22\u2b21\u2b22\u2b21\u2b22\u2b21\u2b22\u2b21\u2b22\u2b21\u2b22\u2b21\u2b22\u2b21\u2b22\n")),(0,l.kt)("h2",{id:"\uc778\uadf8\ub808\uc2a4-\ucee8\ud2b8\ub864\ub7ec-\uc124\uce58"},"\uc778\uadf8\ub808\uc2a4 \ucee8\ud2b8\ub864\ub7ec \uc124\uce58"),(0,l.kt)("p",null,"API Gateway \uc624\ud508\uc18c\uc2a4\uc778 ",(0,l.kt)("a",{parentName:"p",href:"https://docs.solo.io/gloo-edge/latest/"},"Gloo Edge"),"\ub97c \uc778\uadf8\ub808\uc2a4 \ucee8\ud2b8\ub864\ub7ec\ub85c \uc0ac\uc6a9\ud560 \uc218 \uc788\ub2e4. ",(0,l.kt)("inlineCode",{parentName:"p"},"Envoy")," \uae30\ubc18\uc758 \uacbd\ub7c9\ud654\ub41c \uc624\ud508\uc18c\uc2a4\ub85c \ucfe0\ubc84\ub124\ud2f0\uc2a4 \ub124\uc774\ud2f0\ube0c\ud55c \uc635\uc158\ub4e4\uc744 \uc81c\uacf5\ud558\uae30 \ub54c\ubb38\uc5d0 \uac1c\uc778\uc801\uc73c\ub85c \uc120\ud638\ud558\ub294\ud3b8\uc774\ub2e4. \uacf5\uc2dd \uc124\uce58 \ubb38\uc11c\ub294 \ub2e4\uc74c \ub9c1\ud06c\uc5d0\uc11c \ud655\uc778\ud560 \uc218 \uc788\ub2e4."),(0,l.kt)("p",null,(0,l.kt)("a",{parentName:"p",href:"https://docs.solo.io/gloo-edge/latest/installation/ingress/"},"https://docs.solo.io/gloo-edge/latest/installation/ingress/")),(0,l.kt)("p",null,"\uacf5\uc2dd CLI\uc778 ",(0,l.kt)("a",{parentName:"p",href:"https://docs.solo.io/gloo-edge/latest/installation/ingress/#installing-on-kubernetes-with-glooctl"},"glooctl"),"\ub098 ",(0,l.kt)("a",{parentName:"p",href:"https://docs.solo.io/gloo-edge/latest/installation/ingress/#installing-on-kubernetes-with-helm"},"Helm Chart"),"\ub85c \uc124\uce58\ub97c \uc9c4\ud589\ud560 \uc218 \uc788\ub2e4. ingress\ub97c \uad6c\uc131\ud558\uae30 \uc704\ud574 ",(0,l.kt)("inlineCode",{parentName:"p"},"gateway.enabled")," value\uac12\uc744 ",(0,l.kt)("inlineCode",{parentName:"p"},"false"),"\ub85c ",(0,l.kt)("inlineCode",{parentName:"p"},"ingress.enabled")," value\ub97c ",(0,l.kt)("inlineCode",{parentName:"p"},"true"),"\ub85c \ubcc0\uacbd\ud558\uc5ec inline \uad6c\uc131\uc73c\ub85c \ubc30\ud3ec\ub97c \uc9c4\ud589\ud55c\ub2e4."),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-sh"},"helm repo add gloo https://storage.googleapis.com/solo-public-helm\nhelm repo update\nkubectl create namespace gloo-system\nhelm install gloo gloo/gloo --namespace gloo-system \\\n  --set gateway.enabled=false,ingress.enabled=true\n")),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-sh"},"> kubectl get all -n gloo-system\nNAME                                 READY   STATUS    RESTARTS   AGE\npod/discovery-9694c78f6-zrf4l        1/1     Running   0          88s\npod/gloo-7cd566cb69-bfghh            1/1     Running   0          88s\npod/ingress-7fb5c9687d-qq98j         1/1     Running   0          88s\npod/ingress-proxy-5cc555c45b-9mj9n   1/1     Running   0          88s\n\nNAME                    TYPE           CLUSTER-IP      EXTERNAL-IP     PORT(S)                               AGE\nservice/gloo            ClusterIP      10.100.162.70   <none>          9977/TCP,9976/TCP,9988/TCP,9979/TCP   88s\nservice/ingress-proxy   LoadBalancer   10.107.107.38   192.168.31.11   80:32207/TCP,443:32228/TCP            88s\n\nNAME                            READY   UP-TO-DATE   AVAILABLE   AGE\ndeployment.apps/discovery       1/1     1            1           88s\ndeployment.apps/gloo            1/1     1            1           88s\ndeployment.apps/ingress         1/1     1            1           88s\ndeployment.apps/ingress-proxy   1/1     1            1           88s\n\nNAME                                       DESIRED   CURRENT   READY   AGE\nreplicaset.apps/discovery-9694c78f6        1         1         1       88s\nreplicaset.apps/gloo-7cd566cb69            1         1         1       88s\nreplicaset.apps/ingress-7fb5c9687d         1         1         1       88s\nreplicaset.apps/ingress-proxy-5cc555c45b   1         1         1       88s\n")),(0,l.kt)("p",null,"\uc0d8\ud50c ",(0,l.kt)("inlineCode",{parentName:"p"},"petstore")," \uc11c\ube44\uc2a4\ub97c \ubc30\ud3ec\ud558\uace0, \uc778\uadf8\ub808\uc2a4 \ud074\ub798\uc2a4 \uc5b4\ub178\ud14c\uc774\uc158\uc744 ",(0,l.kt)("inlineCode",{parentName:"p"},"kubernetes.io/ingress.class: gloo"),"\ub85c \uc120\uc5b8\ud558\uace0 ",(0,l.kt)("inlineCode",{parentName:"p"},"ddiiwoong.com")," \ud638\uc2a4\ud2b8 \uc774\ub984\uc73c\ub85c \ubc30\ud3ec\ud55c\ub2e4."),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-sh"},"kubectl apply -f \\\n  https://raw.githubusercontent.com/solo-io/gloo/v1.2.9/example/petstore/petstore.yaml\n")),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre"},"cat <<EOF | kubectl apply -f -\napiVersion: networking.k8s.io/v1\nkind: Ingress\nmetadata:\n name: petstore-ingress\n annotations:\n    # note: this annotation is only required if you've set \n    # REQUIRE_INGRESS_CLASS=true in the environment for \n    # the ingress deployment\n    kubernetes.io/ingress.class: gloo\nspec:\n  rules:\n  - host: ddiiwoong.com\n    http:\n      paths:\n      - path: /.*\n        pathType: ImplementationSpecific\n        backend:\n          service:\n            name: petstore\n            port:\n              number: 8080\nEOF\n")),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre"},"> kubectl get ingress\nNAME               CLASS    HOSTS           ADDRESS         PORTS   AGE\npetstore-ingress   <none>   ddiiwoong.com   192.168.31.11   80      7m41s\n")),(0,l.kt)("p",null,"\ud574\ub2f9 \ud638\uc2a4\ud2b8\ub85c \uc815\uc0c1 \ub77c\uc6b0\ud305\ub418\uc5b4 \uc811\uc18d\ub418\ub294 \uac83\uc744 \ud655\uc778\ud560 \uc218 \uc788\ub2e4. "),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre"},'> curl -H "Host: ddiiwoong.com" 192.168.31.11/api/pets\n\n[{"id":1,"name":"Dog","status":"available"},{"id":2,"name":"Cat","status":"pending"}]\n')),(0,l.kt)("h2",{id:"gitops-\ucee8\ud2b8\ub864\ub7ec\ub85c-\ud074\ub7ec\uc2a4\ud130-\uad00\ub9ac"},"GitOps \ucee8\ud2b8\ub864\ub7ec\ub85c \ud074\ub7ec\uc2a4\ud130 \uad00\ub9ac"),(0,l.kt)("p",null,"gitops \uc624\ud508\uc18c\uc2a4\uc778 ",(0,l.kt)("a",{parentName:"p",href:"https://fluxcd.io/docs/get-started/"},"Flux"),"\ub97c \uc0ac\uc6a9\ud574\uc11c \uc5ec\ub7ec\uac00\uc9c0 \ud074\ub7ec\uc2a4\ud130 \uad00\ub9ac\ub97c \uc218\ud589\ud560 \uc218 \uc788\ub2e4. \uc704\uc5d0\uc11c \uc0dd\uc131\ud55c ",(0,l.kt)("inlineCode",{parentName:"p"},"desired state"),"\uc778 \ud074\ub7ec\uc2a4\ud130 \ucee8\ud53c\uadf8\ub97c github repo\uc5d0\uc11c Flux \ucee8\ud2b8\ub864\ub7ec\ub97c \ud1b5\ud574 \ud074\ub7ec\uc2a4\ud130 \uc6b4\uc601\uc744 \uc218\ud589\ud560 \uc218 \uc788\ub2e4. "),(0,l.kt)("p",null,(0,l.kt)("a",{parentName:"p",href:"https://anywhere.eks.amazonaws.com/docs/tasks/cluster/cluster-flux/"},"https://anywhere.eks.amazonaws.com/docs/tasks/cluster/cluster-flux/")),(0,l.kt)("p",null,"Worker \ub178\ub4dc\uc640 Control Plan, Etcd\ub4f1\uc758 vSphere\uc5d0\uc11c \uad00\ub9ac\ud558\ub294 datastore, \ub514\uc2a4\ud06c, \uba54\ubaa8\ub9ac, CPU, resourcepool \ub4f1\uc744 \uad00\ub9ac\ud560 \uc218 \uc788\ub2e4. \ub2e8, EKS\uc758 \uad00\ub9ac\ud615 \ub178\ub4dc\uadf8\ub8f9\uacfc \uc720\uc0ac\ud55c \ubc29\uc2dd\uc73c\ub85c \ub178\ub4dc\uadf8\ub8f9\uc758 VM\uc758 \uc22b\uc790\ub97c \ub298\ub9ac\uac70\ub098 \uc904\uc77c\uc218 \uc788\uc9c0\ub9cc \uc544\uc9c1\uae4c\uc9c0 \uc2e0\uaddc\ub85c worker \ub178\ub4dc\uadf8\ub8f9\uc744 \uc0dd\uc131\ud558\uac70\ub098 \uc0ad\uc81c\ud558\ub294 \uae30\ub2a5\uc740 \uc81c\uacf5\ud558\uc9c0 \uc54a\ub294\ub2e4."),(0,l.kt)("p",null,"\ucd08\uae30 \ud074\ub7ec\uc2a4\ud130 \ucee8\ud53c\uadf8\uc5d0 \uc544\ub798\uc640 \uac19\uc774 \uae30\uc874 \ub178\ub4dc\uadf8\ub8f9 ",(0,l.kt)("inlineCode",{parentName:"p"},"md-0"),"\uc5d0 \uc2e0\uaddc VM 1\ub300\ub97c \ucd94\uac00\ud574\ubcf4\uc790. (2\ub300->3\ub300)"),(0,l.kt)("ul",null,(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("inlineCode",{parentName:"li"},"clusters/$CLUSTER_NAME/eksa-system/eksa-cluster.yaml"))),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-yaml"},"apiVersion: anywhere.eks.amazonaws.com/v1alpha1\nkind: Cluster\nmetadata:\n  name: homelab\n  namespace: default\nspec:\n  ...\n  workerNodeGroupConfigurations:\n  - count: 3\n    machineGroupRef:\n      kind: VSphereMachineConfig\n      name: homelab\n    name: md-0\n")),(0,l.kt)("p",null,"\ucd08\uae30 \ud658\uacbd\uc5d0\uc11c \uad6c\uc131\ub41c gitops repo\uc5d0 \uc218\uc815\ub41c \ud30c\uc77c\uc744 \ucee4\ubc0b\ud55c\ub2e4."),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-sh"},"git add clusters/homelab/eksa-system/eksa-cluster.yaml\ngit commit -m 'Scale from 2 to 3 at WorkerNodeGroup md-0 '\ngit push origin main\n")),(0,l.kt)("p",null,(0,l.kt)("inlineCode",{parentName:"p"},"md-0")," \ub178\ub4dc\uadf8\ub8f9\uc5d0 VM\uc774 \uc0c8\ub86d\uac8c \ucd94\uac00\ub41c \uac83\uc744 \ud655\uc778\ud560 \uc218 \uc788\ub2e4. "),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-sh"},"> kubectl get machine -n eksa-system\nNAME                            CLUSTER   NODENAME         PROVIDERID                                       PHASE     AGE   VERSION\nhomelab-etcd-jrhvt              homelab                    vsphere://421b44b1-6017-8469-734b-01bcf68cb459   Running   75m   \nhomelab-j5mql                   homelab   192.168.31.186   vsphere://421b4382-0727-3afc-5c47-b73455010d35   Running   75m   v1.21.5-eks-1-21-8\nhomelab-md-0-76478bb486-j68fd   homelab   192.168.31.190   vsphere://421bc1ee-eac7-f1db-b351-5fac25b45fc0   Running   11m   v1.21.5-eks-1-21-8\nhomelab-md-0-76478bb486-jszj4   homelab   192.168.31.187   vsphere://421b4dc9-b7c6-f0a2-0b50-e5379748b9a9   Running   75m   v1.21.5-eks-1-21-8\nhomelab-md-0-76478bb486-rpxlm   homelab   192.168.31.188   vsphere://421b20a4-9870-cd20-4cff-67bb4a9d8372   Running   75m   v1.21.5-eks-1-21-8\nhomelab-w6bq8                   homelab   192.168.31.189   vsphere://421befe9-e26a-3f18-9ccf-3fe32dd57fd2   Running   75m   v1.21.5-eks-1-21-8\n")),(0,l.kt)("h2",{id:"\uc815\ub9ac"},"\uc815\ub9ac"),(0,l.kt)("p",null,"\uc774\ubc88 \ud3ec\uc2a4\ud305\uc5d0\uc11c\ub294 eks-anywhere \uc624\ud508\uc18c\uc2a4\ub97c vSphere \ud648\uc11c\ubc84\uc5d0\uc11c \ud14c\uc2a4\ud2b8\ub97c \uc9c4\ud589\ud55c \uacbd\ud5d8\uc744 \uc815\ub9ac\ud588\ub2e4. "),(0,l.kt)("p",null,"\uc124\uce58\ub97c \uc9c4\ud589\ud558\uba74\uc11c \uc5d0\ub7ec\uac00 \ub098\uba74 \ud558\ub098\ud558\ub098 \uacf5\uc2dd \ubb38\uc11c\ub97c \ud655\uc778\ud558\uace0, \ud68c\uc0ac \uc2ac\ub799 \ucc2c\uc2a4\ub3c4 \uc0ac\uc6a9\ud558\uba74\uc11c \ud798\ub4e4\uac8c \uc124\uce58\ub97c \uc644\ub8cc\ud588\ub2e4. \uc0dd\uac01\ubcf4\ub2e4 \ub514\ubc84\uae45\uc744 \ud558\ub294\ub370 \ub9ce\uc740 \uc2dc\uac04\uc744 \ud5c8\ube44\ud588\ub294\ub370 \uc2e4\uc81c\ub85c 2\uc77c \uc774\uc0c1 \uace0\uc0dd\uc744 \ud588\ub2e4. \ub300\ubd80\ubd84\uc758 \uacbd\uc6b0 \ub514\ubc84\uadf8 \ub808\ubca8\uc758 \ub85c\uadf8\ub97c \ubcf4\uba74\uc11c \ud2b8\ub7ec\ube14\uc288\ud305\uc744 \ud1b5\ud574 \ubb38\uc81c \ud574\uacb0\uc774 \uac00\ub2a5\ud588\uace0 \uadf8 \uacfc\uc815\uc5d0\uc11c EKS Anywhere\uc758 \ub0b4\ubd80 \uad6c\uc131\uc694\uc18c\ub4e4\uacfc \uc2e4\uc81c Cluster API \uc6cc\ud06c\ud50c\ub85c\uc6b0\ub97c \uc774\ud574\ud560 \uc218 \uc788\uc5c8\ub2e4. "),(0,l.kt)("p",null,"\ub2e4\ub9cc \uc544\uc9c1\uae4c\uc9c0 \ubb38\uc11c\ud654\ub098 \ucee4\ubba4\ub2c8\ud2f0\uc5d0 \ub9ce\uc740 \uc720\uc2a4\ucf00\uc774\uc2a4\uac00 \uc5c6\ub2e4\ub294 \uc810\uacfc Cilium\uc744 \uba54\uc778 CNI\ub85c \ud65c\uc6a9\ud568\uc5d0\ub3c4 \ubd88\uad6c\ud558\uace0 ",(0,l.kt)("inlineCode",{parentName:"p"},"CiliumNetworkPolicy")," API\ub97c \uc0ac\uc6a9\ud558\uc9c0 \ubabb\ud558\ub294 \uc810\uc774\ub098 Cilium \uc720\uc800 \uc778\ud130\ud398\uc774\uc2a4\uc778 ",(0,l.kt)("a",{parentName:"p",href:"https://github.com/cilium/hubble-ui"},"Hubble UI"),"\ub97c \ud65c\uc131\ud654\ud574\uc11c \uc0ac\uc6a9\ud560 \uc218\uac00 \uc5c6\ub294 ",(0,l.kt)("a",{parentName:"p",href:"https://anywhere.eks.amazonaws.com/docs/tasks/workload/networking-and-security/#additional-cilium-features"},"\uc81c\uc57d\uc0ac\ud56d"),"\ub4f1\uc774 \uc788\uc5c8\uace0, \ucfe0\ubc84\ub124\ud2f0\uc2a4 \uad00\ub828\ud574\uc11c\ub294 ",(0,l.kt)("inlineCode",{parentName:"p"},"Persistent Volume")," \uad00\ub828\ud558\uc5ec vSAN\uc744 \uc0ac\uc6a9\ud558\uc9c0 \uc54a\uc740 \ud658\uacbd\uc5d0\uc11c\ub294 VMDK\ub97c \uc218\ub3d9\uc73c\ub85c \uc0dd\uc131\ud558\uace0 \ud574\ub2f9 \ubcfc\ub968\uc744 \ub9e4\ud551\uc2dc\ucf1c\uc57c \ud65c\uc6a9\uc774 \uac00\ub2a5\ud55c \uc81c\uc57d\uc0ac\ud56d\uc774 \uc874\uc7ac\ud558\ub294 \uac83\uc774 \uc870\uae08 \uc544\uc26c\uc6b4 \ubd80\ubd84\uc774\ub2e4."),(0,l.kt)("p",null,"\uc2e4\uc81c \ud504\ub85c\ub355\uc158 \ud658\uacbd\uc5d0\uc11c \uc0ac\uc6a9\ud560 \uc815\ub3c4\ub77c\uae30 \ubcf4\ub2e8 EKS\ub97c \uc0ac\uc6a9\ud558\ub294 \uad00\uc810\uc5d0\uc11c \uc720\uc0ac\ud55c \uacbd\ud5d8\uc744 \ubc14\ud0d5\uc73c\ub85c \uac1c\ubc1c\ud658\uacbd\uc744 \uac00\uc838\uac08\uc218 \uc788\uace0 tanzu\ub098 \ub2e4\ub978 cluster-api\ub97c \ud65c\uc6a9\ud55c \ub3c4\uad6c\ub4e4 \ubcf4\ub2e4 \uc880\ub354 \uc720\uc5f0\ud558\uace0 \uc624\ud508\uc18c\uc2a4\uc5d0 \uac00\uae4c\uc6b4 \uacbd\ud5d8\uc131\uc744 \uc81c\uacf5\ud55c\ub2e4\uace0 \uc0dd\uac01\ud55c\ub2e4. \uac8c\ub2e4\uac00 Flux\uc758 ",(0,l.kt)("inlineCode",{parentName:"p"},"Server-side reconciliation")," \uae30\ubc18 ",(0,l.kt)("a",{parentName:"p",href:"https://kubernetes.io/docs/reference/using-api/server-side-apply/"},"\ucfe0\ubc84\ub124\ud2f0\uc2a4 \ub9ac\uc18c\uc2a4 \uad00\ub9ac \ubc29\uc2dd"),"\uc73c\ub85c \ud074\ub7ec\uc2a4\ud130\ub97c \ub9e4\uc6b0 \uc720\uc5f0\ud558\uac8c \uad00\ub9ac\ud560 \uc218 \uc788\ub2e4\ub294 \uac83\ub3c4 \uc8fc\ubaa9\ud574\ubcfc\ub9cc\ud55c \ub0b4\uc6a9\uc774\ub77c \uc0dd\uac01\ud55c\ub2e4. \ud074\ub7ec\uc2a4\ud130 \uc790\uccb4\ub3c4 \uc778\ud504\ub77c \ub9ac\uc18c\uc2a4\ub77c \uac00\uc815\ud558\uace0 \ucd5c\ucd08\uc5d0 \uc6d0\ud558\ub294 \ud615\ud0dc\ub85c \uc120\uc5b8\ud558\uace0 \uad6c\uc131\uc774\ud6c4\uc5d0\ub3c4 \ucfe0\ubc84\ub124\ud2f0\uc2a4 CRD \ud615\uc2dd\uc73c\ub85c \ub178\ub4dc\uadf8\ub8f9\uacfc \uc778\uc2a4\ud134\uc2a4 \ub4f1\uc758 \uc5ec\ub7ec \ub9ac\uc18c\uc2a4\ub97c GitOps \ubc29\uc2dd\uc73c\ub85c \uad00\ub9ac\ud558\ub294 \ubc29\uc2dd\uc744 \ucc44\ud0dd\ud558\uace0 \uc788\uae30 \ub54c\ubb38\uc5d0 \uc2e4\uc81c \uc778\ud504\ub77c \uad00\ub9ac\ub97c \ud558\ub294 \uc6b4\uc601\uc790\ub97c \uc704\ud55c \uac00\uc7a5 \ud6a8\uacfc\uc801\uc778 \ubc29\ubc95\uc744 \ucc44\ud0dd\ud588\ub2e4\uace0 \ubcfc \uc218 \uc788\ub2e4."),(0,l.kt)("p",null,"\uadf8\ub9ac\uace0 \ud45c\uc900\uaddc\uaca9\uc758 Managed \ud558\ub4dc\uc6e8\uc5b4\ub97c \uc0ac\uc6a9\ud558\ub294 Outpost\uc640 \ube44\uad50\ud558\ub294 \uc790\ub8cc\ub4e4\uc774 \ucd5c\uadfc \ub9ce\uc774 \uc62c\ub77c\uc624\uace0 \uc788\ub294\ub370 EKS Anywhere\uc758 \uac00\uc7a5 \ud070 \uc7a5\uc810\uc740 \ub0b4\uac00 \uac00\uc9c4 \ud558\ub4dc\uc6e8\uc5b4\ub97c EKS Distro\uae30\ubc18\uc758 \uc624\ud508\uc18c\uc2a4\ub97c \ud1b5\ud574 \uc0ac\uc6a9\ud560 \uc218 \uc788\uace0 AWS \ud658\uacbd\uacfc\uc758 \uc9c1\uc811\uc801\uc778 \ud1b5\uc2e0\uc774 \uc5c6\uc774\ub3c4 \uc790\uccb4\uc801\uc778 \uc6cc\ud06c\ub85c\ub4dc \uc6b4\uc601\uc774 \uac00\ub2a5\ud55c\uac8c \uac00\uc7a5 \ud070 \uc7a5\uc810\uc774\ub77c\uace0 \uc0dd\uac01\ud55c\ub2e4. "),(0,l.kt)("p",null,"\ud604\uc7ac \uc7ac\uc9c1\uc911\uc778 \ud68c\uc0ac\uc758 \uc81c\ud488\uacfc \uad00\ub828\ud574\uc11c \ub85c\ub4dc\ub9f5\uc744 \uc790\uc138\ud788 \uc5b8\uae09\ud558\uc9c0\ub294 \ubabb\ud558\uc9c0\ub9cc \uc5d4\ud130\ud504\ub77c\uc774\uc988 vSphere \ud658\uacbd\uacfc \ub3d9\uc2dc\uc5d0 EKS\ub97c \uc0ac\uc6a9\ud558\ub294 \uc870\uc9c1\uc5d0\uc11c\ub294 \uc911\uc694\ud55c \ud558\ub098\uc758 \uc120\ud0dd\uc9c0\uac00 \ub420 \uc218 \uc788\ub2e4\ub294 \uc810\uc5d0\uc11c\ub3c4 \uc9c0\ucf1c\ubcfc\ub9cc\ud558\ub2e4\uace0 \uc0dd\uac01\ud55c\ub2e4. "),(0,l.kt)("p",null,"\ub2e4\uc74c \ud3ec\uc2a4\ud305\uc5d0\uc11c\ub294 \ud574\ub2f9 \ud074\ub7ec\uc2a4\ud130\uc5d0 OpenTelemetry collector, Loki, Prometheus \uad6c\uc131\uc744 \ud1b5\ud55c observability \ud658\uacbd \uad6c\uc131\uc744 \uc9c4\ud589\ud574\ubcfc \uc608\uc815\uc774\ub2e4."),(0,l.kt)("blockquote",null,(0,l.kt)("p",{parentName:"blockquote"},"\ud574\ub2f9 \ud3ec\uc2a4\ud305\uc740 \ud604\uc7ac \uc7ac\uc9c1\uc911\uc778 \ud68c\uc0ac\uc5d0 \uad00\ub828\uc774 \uc5c6\uace0, \uac1c\uc778 \uc5ed\ub7c9 \uac1c\ubc1c\uc744 \uc704\ud55c \uc790\ub8cc\ub85c \ud65c\uc6a9\ud560 \uc608\uc815\uc785\ub2c8\ub2e4.")))}k.isMDXComponent=!0},62453:function(e,n,t){n.Z=t.p+"assets/images/vsphere_cert-46b8ff831c6ea16844e8182f910d0650.png"}}]);